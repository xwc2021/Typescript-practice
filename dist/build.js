(()=>{"use strict";const t=function(t,n){this.from=t,this.dir=n};var n=.001;function i(t,i){return Math.abs(t-i)<n}function e(t,n){return t.map((function(t){return t.h.hit(n,t.s)})).filter((function(t){return t.is_hit})).sort((function(t,n){return t.t-n.t}))}const r=function(){function t(t,n,i){this.x=0,this.y=0,this.z=0,this.x=t,this.y=n,this.z=i}return t.reflect=function(n,i){var e=-2*t.dot(n,i);return i.multiply(e).add(n)},t.add=function(n,i){return new t(i.x+n.x,i.y+n.y,i.z+n.z)},t.minus=function(n,i){return new t(n.x-i.x,n.y-i.y,n.z-i.z)},t.multiply=function(n,i){return new t(n.x*i,n.y*i,n.z*i)},t.multiply3=function(n,i){return new t(n.x*i.x,n.y*i.y,n.z*i.z)},t.cross=function(n,i){return new t(n.y*i.z-n.z*i.y,-n.x*i.z+n.z*i.x,n.x*i.y-n.y*i.x)},t.dot=function(t,n){return t.x*n.x+t.y*n.y+t.z*n.z},t.equal=function(t,n){return i(t.x,n.x)&&i(t.y,n.y)&&i(t.z,n.z)},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.prototype.normalize=function(){var t=this.length();return this.x=this.x/t,this.y=this.y/t,this.z=this.z/t,this},t.prototype.add=function(n){return t.add(this,n)},t.prototype.minus=function(n){return t.minus(this,n)},t.prototype.multiply=function(n){return t.multiply(this,n)},t.prototype.negative=function(){return t.multiply(this,-1)},t.prototype.clone=function(){return new t(this.x,this.y,this.z)},t.up=new t(0,1,0),t.zero=new t(0,0,0),t}(),s=function(){function i(t){this.color=t}return i.prototype.shading=function(i,s,o,h){var u,a=i.normal,l=(0,(u=-r.dot(s,a))>1?1:u<0?0:u),p=function(i,r,s){var o=r.negative(),h=i.hit_pos.add(o.multiply(n));return 0!=e(s,new t(h,o)).length?.45:1}(i,s,o);return this.color.multiply(l).multiply(p)},i.yellow=new i(new r(1,1,0)),i.red=new i(new r(1,0,0)),i.green=new i(new r(0,1,0)),i.blue=new i(new r(0,0,1)),i.gray=new i(new r(.5,.5,.5)),i.white=new i(new r(1,1,1)),i}(),o=function(){function n(t,n,i){this.z_axis=r.minus(n,t).normalize();var e=r.up;this.x_axis=r.cross(e,this.z_axis).normalize(),this.y_axis=r.cross(this.z_axis,this.x_axis),this.eye=t,this.fov_degree=i}return n.prototype.create_ray_dir=function(t,n,i){var e,r=(e=.5*this.fov_degree,Math.PI*e/180),s=Math.tan(r),o=s*i;return this.z_axis.add(this.x_axis.multiply(t*o)).add(this.y_axis.multiply(n*s))},n.prototype.render=function(n,i){var o=this,h=new r(1,-1,0).normalize(),u=.5/n.h,a=[{x:0,y:0},{x:u,y:u},{x:-u,y:u},{x:-u,y:-u},{x:u,y:-u}];n.render_pixel((function(n,u,l){var p=o.create_ray_dir(n,u,l),f=a.map((function(n){var i=p.add(o.x_axis.multiply(n.x)).add(o.y_axis.multiply(n.y));return new t(o.eye,i.normalize())})).map((function(t){var n=e(i,t);if(0!=n.length){var r=n[0];return r.s.shading(r,h,i,1)}return s.gray.color})),c=a.length;return f.reduce((function(t,n){return t.add(n)}),r.zero).multiply(1/c)}))},n}(),h=function(){function t(t,n,i){this.plane=t,this.w=n,this.h=i}return t.prototype.hit=function(t,n){var i=this.plane.hit(t,n);if(i.is_hit){var e=i.hit_pos,s=e.minus(this.plane.C),o=r.equal(this.plane.N,r.up)?new r(1,0,0):r.up,h=r.cross(o,this.plane.N).normalize(),u=r.cross(h,this.plane.N),a=r.dot(s,h),l=r.dot(s,u);return{is_hit:Math.abs(a)<this.w&&Math.abs(l)<this.h,hit_pos:e,i:t.dir,t:i.t,normal:this.plane.N,s:n}}return{is_hit:!1}},t}(),u=function(){function t(t,n){this.C=t,this.N=n}return t.prototype.is_positive=function(t){var n=r.minus(t,this.C);return r.dot(n,this.N)>0},t.prototype.hit=function(t,n){var e=t.from,s=t.dir,o=r.dot(s,this.N),h=r.dot(r.minus(this.C,e),this.N);if(i(o,0))return{is_hit:!1,hit_pos:null,t:-1};var u=h/o;return{is_hit:u>0,hit_pos:e.add(s.multiply(u)),i:s,t:u,normal:this.N,s:n}},t}(),a=function(){function t(t,n){this.C=t,this.R=n}return t.prototype.hit=function(t,n){var e=t.dir,s=t.from,o=r.dot(e,e),h=2*(r.dot(e,s)-r.dot(e,this.C)),u=h*h-4*o*(r.dot(s,s)-2*r.dot(s,this.C)+r.dot(this.C,this.C)-this.R*this.R);if(i(u,0)){if((c=-h/(2*o))<0)return{is_hit:!1};var a=(f=s.add(e.multiply(c))).minus(this.C).normalize();return{is_hit:!0,hit_pos:f,i:e,t:c,normal:a,s:n}}if(u>0){var l=Math.sqrt(u),p=[(-h-l)/(2*o),(-h+l)/(2*o)].filter((function(t){return t>0}));if(0==p.length)return{is_hit:!1};var f,c=p[0];return a=(f=s.add(e.multiply(c))).minus(this.C).normalize(),{is_hit:!0,hit_pos:f,i:e,t:c,normal:a,s:n}}return{is_hit:!1}},t}(),l=function(){function t(t,n){void 0===t&&(t=320),void 0===n&&(n=240),this.w=320,this.h=240,this.backbuffer=null,this.w=t,this.h=n,this.backbuffer=new OffscreenCanvas(this.w,this.h)}return t.prototype.render_pixel=function(t){for(var n=this.backbuffer.getContext("2d"),i=n.getImageData(0,0,this.w,this.h),e=i.data,r=this.w/this.h,s=0;s<this.h;++s)for(var o=0;o<this.w;++o){var h=4*(o+s*this.w),u=(o+.5)/this.w,a=(s+.5)/this.h,l=t(2*u-1,2*(a=1-a)-1,r),p=l.x,f=l.y,c=l.z,y=1/2.1;p=Math.pow(p,y),f=Math.pow(f,y),c=Math.pow(c,y),e[h++]=Math.round(255*p),e[h++]=Math.round(255*f),e[h++]=Math.round(255*c),e[h]=255}n.putImageData(i,0,0)},t.prototype.show_buffer=function(t){var n=document.getElementById(t);n.style.width=this.w+"px",n.style.height=this.h+"px",n.width=n.clientWidth,n.height=n.clientHeight,n.getContext("bitmaprenderer").transferFromImageBitmap(this.backbuffer.transferToImageBitmap())},t}(),p=function(t,n){this.s=t,this.h=n},f=function(){function i(){}return i.prototype.shading=function(i,o,h,u){if(u>20)return console.log("超過上限"),s.green.color;var a=i.normal,l=i.i,p=r.reflect(l,a),f=i.hit_pos.add(p.multiply(n)),c=e(h,new t(f,p)),y=new r(1,1,1);if(0!=c.length){var w=c[0],d=w.s.shading(w,o,h,++u);return r.multiply3(y,d.multiply(.9))}return r.multiply3(y,s.gray.color.multiply(.9))},i}();new function(){var t=[new p(s.white,new h(new u(r.zero,r.up),16,16))];t.push(new p(s.yellow,new a(new r(6,2,-8),2))),t.push(new p(s.green,new a(new r(-6,2,-8),2))),t.push(new p(s.blue,new a(new r(0,2,-12),2))),t.push(new p(s.yellow,new a(new r(-10,6,0),6))),t.push(new p(new f,new a(new r(0,2,-2),2))),t.push(new p(new f,new a(new r(12,4,-6),4))),t.push(new p(new f,new a(new r(8,4,2),4)));var n=new o(new r(0,20,-20),r.zero,60),i=new l(800,600);n.render(i,t),i.show_buffer("canvas")}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0IsSUFBSSxFQUFhLElBQUssS0FDMUNpRSxFQUFPbEUsT0FBT0MsRUFBZTVFLEdBQzdCNEUsRUFBY2dELFlBQVksWSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYmdsX3Rlc3QvLi9zcmMvTWF0aC9SYXkudHMiLCJ3ZWJwYWNrOi8vd2ViZ2xfdGVzdC8uL3NyYy9NYXRoL1Rvb2wudHMiLCJ3ZWJwYWNrOi8vd2ViZ2xfdGVzdC8uL3NyYy9NYXRoL1ZlY3Rvci50cyIsIndlYnBhY2s6Ly93ZWJnbF90ZXN0Ly4vc3JjL01hdGVyYWlscy9EaWZmdXNlLnRzIiwid2VicGFjazovL3dlYmdsX3Rlc3QvLi9zcmMvTWF0aC9DYW1lcmEudHMiLCJ3ZWJwYWNrOi8vd2ViZ2xfdGVzdC8uL3NyYy9NYXRoL1JlY3QudHMiLCJ3ZWJwYWNrOi8vd2ViZ2xfdGVzdC8uL3NyYy9NYXRoL1BsYW5lLnRzIiwid2VicGFjazovL3dlYmdsX3Rlc3QvLi9zcmMvTWF0aC9TcGhlcmUudHMiLCJ3ZWJwYWNrOi8vd2ViZ2xfdGVzdC8uL3NyYy9NYXRoL1JlbmRlclRhcmdldC50cyIsIndlYnBhY2s6Ly93ZWJnbF90ZXN0Ly4vc3JjL09iamVjdC9TY2VuZU5vZGUudHMiLCJ3ZWJwYWNrOi8vd2ViZ2xfdGVzdC8uL3NyYy9NYXRlcmFpbHMvTWlycm9yLnRzIiwid2VicGFjazovL3dlYmdsX3Rlc3QvLi9zcmMvbWFpbi50cyIsIndlYnBhY2s6Ly93ZWJnbF90ZXN0Ly4vc3JjL0FwcC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVmVjb3IgZnJvbSBcIi4vVmVjdG9yXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSYXkge1xyXG4gICAgZnJvbTogVmVjb3I7XHJcbiAgICBkaXI6IFZlY29yO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGZyb206IFZlY29yLCBkaXI6IFZlY29yKSB7XHJcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcclxuICAgICAgICB0aGlzLmRpciA9IGRpcjtcclxuICAgIH1cclxufTsiLCJpbXBvcnQgU2NlbmVOb2RlIGZyb20gXCIuLi9PYmplY3QvU2NlbmVOb2RlXCI7XHJcbmltcG9ydCBSYXkgZnJvbSBcIi4vUmF5XCI7XHJcbmltcG9ydCBIaXRJbmZvIGZyb20gXCIuL0hpdEluZm9cIjtcclxuaW1wb3J0IFZlY3RvciBmcm9tIFwiLi9WZWN0b3JcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWdyZWVfdG9fUmFkKGQ6IG51bWJlcikge1xyXG4gICAgcmV0dXJuIE1hdGguUEkgKiBkIC8gMTgwO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGVwc2lsb246IG51bWJlciA9IDAuMDAxO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG51bWJlcl9lcXVhbChhOiBudW1iZXIsIGI6IG51bWJlcikge1xyXG4gICAgcmV0dXJuIE1hdGguYWJzKGEgLSBiKSA8IGVwc2lsb247XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBcclxuICogQHBhcmFtIHggaW5wdXRcclxuICogQHBhcmFtIGEgbWluIFxyXG4gKiBAcGFyYW0gYiBtYXhcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjbGFtcCh4OiBudW1iZXIsIGE6IG51bWJlciwgYjogbnVtYmVyKSB7XHJcbiAgICBpZiAoeCA+IGIpXHJcbiAgICAgICAgcmV0dXJuIGI7XHJcbiAgICBlbHNlIGlmICh4IDwgYSlcclxuICAgICAgICByZXR1cm4gYTtcclxuICAgIGVsc2VcclxuICAgICAgICByZXR1cm4geDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldF9oaXRfc29ydF9saXN0KG9ial9saXN0OiBTY2VuZU5vZGVbXSwgcmF5OiBSYXkpIHtcclxuICAgIGxldCBoaXRfc29ydF9saXN0ID0gb2JqX2xpc3QubWFwKG9iaiA9PiBvYmouaC5oaXQocmF5LCBvYmoucykpXHJcbiAgICAgICAgLmZpbHRlcihpbmZvID0+IGluZm8uaXNfaGl0KVxyXG4gICAgICAgIC5zb3J0KChhOiBIaXRJbmZvLCBiOiBIaXRJbmZvKSA9PiBhLnQgLSBiLnQpO1xyXG5cclxuICAgIHJldHVybiBoaXRfc29ydF9saXN0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0X3NoYWRvd193ZWlnaHQoaGl0X2luZm86IEhpdEluZm8sIGRpcmVjdGlvbl9saWdodF9kaXI6IFZlY3Rvciwgb2JqX2xpc3Q6IFNjZW5lTm9kZVtdKSB7XHJcblxyXG4gICAgLy8g5piv5ZCm5Zyo5b2x5a2Q5YWnXHJcbiAgICBsZXQgZGlyID0gZGlyZWN0aW9uX2xpZ2h0X2Rpci5uZWdhdGl2ZSgpO1xyXG4gICAgbGV0IGZyb20gPSBoaXRfaW5mby5oaXRfcG9zLmFkZChkaXIubXVsdGlwbHkoZXBzaWxvbikpOyAvLyDlgY/np7vkuIDlsI/mrrXot53pm6LvvIzpgb/lhY3lsITkuK3oh6rlt7FcclxuICAgIGxldCByYXkgPSBuZXcgUmF5KGZyb20sIGRpcik7XHJcbiAgICBsZXQgaGl0X3NvcnRfbGlzdCA9IGdldF9oaXRfc29ydF9saXN0KG9ial9saXN0LCByYXkpO1xyXG4gICAgaWYgKGhpdF9zb3J0X2xpc3QubGVuZ3RoICE9IDApIHsgLy8g5Zyo5b2x5a2Q5YWnXHJcbiAgICAgICAgcmV0dXJuIDAuNDU7IC8vIOS4jeimgeWkqum7kVxyXG4gICAgfSBlbHNlXHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbn0iLCJpbXBvcnQgeyBudW1iZXJfZXF1YWwgfSBmcm9tICcuL1Rvb2wnXHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmVjdG9yIHtcclxuXHJcbiAgICBzdGF0aWMgdXAgPSBuZXcgVmVjdG9yKDAsIDEsIDApO1xyXG4gICAgc3RhdGljIHplcm8gPSBuZXcgVmVjdG9yKDAsIDAsIDApO1xyXG5cclxuICAgIHN0YXRpYyByZWZsZWN0KEk6IFZlY3RvciwgTjogVmVjdG9yKSB7XHJcbiAgICAgICAgbGV0IEwgPSAtMiAqIFZlY3Rvci5kb3QoSSwgTilcclxuICAgICAgICByZXR1cm4gTi5tdWx0aXBseShMKS5hZGQoSSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFkZChBOiBWZWN0b3IsIEI6IFZlY3Rvcikge1xyXG4gICAgICAgIHZhciB0ZW1wID0gbmV3IFZlY3RvcihCLnggKyBBLngsIEIueSArIEEueSwgQi56ICsgQS56KTtcclxuICAgICAgICByZXR1cm4gdGVtcFxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBtaW51cyhBOiBWZWN0b3IsIEI6IFZlY3Rvcikge1xyXG4gICAgICAgIHZhciB0ZW1wID0gbmV3IFZlY3RvcihBLnggLSBCLngsIEEueSAtIEIueSwgQS56IC0gQi56KTtcclxuICAgICAgICByZXR1cm4gdGVtcFxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBtdWx0aXBseShBOiBWZWN0b3IsIHM6IG51bWJlcikge1xyXG4gICAgICAgIHZhciB0ZW1wID0gbmV3IFZlY3RvcihBLnggKiBzLCBBLnkgKiBzLCBBLnogKiBzKTtcclxuICAgICAgICByZXR1cm4gdGVtcFxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBtdWx0aXBseTMoQTogVmVjdG9yLCBCOiBWZWN0b3IpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcihBLnggKiBCLngsIEEueSAqIEIueSwgQS56ICogQi56KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY3Jvc3MoQTogVmVjdG9yLCBCOiBWZWN0b3IpIHtcclxuICAgICAgICB2YXIgdGVtcCA9IG5ldyBWZWN0b3IoQS55ICogQi56IC0gQS56ICogQi55LCAtQS54ICogQi56ICsgQS56ICogQi54LCBBLnggKiBCLnkgLSBBLnkgKiBCLngpO1xyXG4gICAgICAgIHJldHVybiB0ZW1wO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBkb3QoQTogVmVjdG9yLCBCOiBWZWN0b3IpIHtcclxuICAgICAgICByZXR1cm4gQS54ICogQi54ICsgQS55ICogQi55ICsgQS56ICogQi56O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBlcXVhbChBOiBWZWN0b3IsIEI6IFZlY3Rvcikge1xyXG4gICAgICAgIHJldHVybiBudW1iZXJfZXF1YWwoQS54LCBCLngpICYmIG51bWJlcl9lcXVhbChBLnksIEIueSkgJiYgbnVtYmVyX2VxdWFsKEEueiwgQi56KTtcclxuICAgIH1cclxuXHJcbiAgICB4OiBudW1iZXIgPSAwO1xyXG4gICAgeTogbnVtYmVyID0gMDtcclxuICAgIHo6IG51bWJlciA9IDA7XHJcbiAgICBjb25zdHJ1Y3RvcihweDogbnVtYmVyLCBweTogbnVtYmVyLCBwejogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy54ID0gcHg7XHJcbiAgICAgICAgdGhpcy55ID0gcHk7XHJcbiAgICAgICAgdGhpcy56ID0gcHo7XHJcbiAgICB9XHJcblxyXG4gICAgbGVuZ3RoKCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55ICsgdGhpcy56ICogdGhpcy56KTtcclxuICAgIH1cclxuXHJcbiAgICBub3JtYWxpemUoKSB7XHJcbiAgICAgICAgdmFyIHRlbXAgPSB0aGlzLmxlbmd0aCgpO1xyXG4gICAgICAgIHRoaXMueCA9IHRoaXMueCAvIHRlbXA7XHJcbiAgICAgICAgdGhpcy55ID0gdGhpcy55IC8gdGVtcDtcclxuICAgICAgICB0aGlzLnogPSB0aGlzLnogLyB0ZW1wO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZChBOiBWZWN0b3IpIHtcclxuICAgICAgICByZXR1cm4gVmVjdG9yLmFkZCh0aGlzLCBBKTtcclxuICAgIH1cclxuXHJcbiAgICBtaW51cyhBOiBWZWN0b3IpIHtcclxuICAgICAgICByZXR1cm4gVmVjdG9yLm1pbnVzKHRoaXMsIEEpO1xyXG4gICAgfVxyXG5cclxuICAgIG11bHRpcGx5KHM6IG51bWJlcikge1xyXG4gICAgICAgIHJldHVybiBWZWN0b3IubXVsdGlwbHkodGhpcywgcyk7XHJcbiAgICB9XHJcblxyXG4gICAgbmVnYXRpdmUoKSB7XHJcbiAgICAgICAgcmV0dXJuIFZlY3Rvci5tdWx0aXBseSh0aGlzLCAtMSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvbmUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IodGhpcy54LCB0aGlzLnksIHRoaXMueik7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgVmVjdG9yIGZyb20gXCIuLi9NYXRoL1ZlY3RvclwiO1xyXG5pbXBvcnQgSGl0SW5mbyBmcm9tIFwiLi4vTWF0aC9IaXRJbmZvXCI7XHJcbmltcG9ydCB7IGNsYW1wLCBnZXRfc2hhZG93X3dlaWdodCB9IGZyb20gXCIuLi9NYXRoL1Rvb2xcIjtcclxuaW1wb3J0IFNoYWRlciBmcm9tIFwiLi9TaGFkZXJcIjtcclxuaW1wb3J0IFNjZW5lTm9kZSBmcm9tIFwiLi4vT2JqZWN0L1NjZW5lTm9kZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGlmZnVzZSBpbXBsZW1lbnRzIFNoYWRlciB7XHJcbiAgICBzdGF0aWMgeWVsbG93ID0gbmV3IERpZmZ1c2UobmV3IFZlY3RvcigxLCAxLCAwKSk7XHJcbiAgICBzdGF0aWMgcmVkID0gbmV3IERpZmZ1c2UobmV3IFZlY3RvcigxLCAwLCAwKSk7XHJcbiAgICBzdGF0aWMgZ3JlZW4gPSBuZXcgRGlmZnVzZShuZXcgVmVjdG9yKDAsIDEsIDApKTtcclxuICAgIHN0YXRpYyBibHVlID0gbmV3IERpZmZ1c2UobmV3IFZlY3RvcigwLCAwLCAxKSk7XHJcbiAgICBzdGF0aWMgZ3JheSA9IG5ldyBEaWZmdXNlKG5ldyBWZWN0b3IoMC41LCAwLjUsIDAuNSkpO1xyXG4gICAgc3RhdGljIHdoaXRlID0gbmV3IERpZmZ1c2UobmV3IFZlY3RvcigxLCAxLCAxKSk7XHJcblxyXG4gICAgY29sb3I6IFZlY3RvcjtcclxuICAgIGNvbnN0cnVjdG9yKGNvbG9yOiBWZWN0b3IpIHtcclxuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3I7XHJcbiAgICB9XHJcblxyXG4gICAgc2hhZGluZyhoaXRfaW5mbzogSGl0SW5mbywgZGlyZWN0aW9uX2xpZ2h0X2RpcjogVmVjdG9yLCBvYmpfbGlzdDogU2NlbmVOb2RlW10sIGRlcHRoOiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgbiA9IGhpdF9pbmZvLm5vcm1hbDtcclxuICAgICAgICBsZXQgc3RyZW5ndGggPSBjbGFtcCgtVmVjdG9yLmRvdChkaXJlY3Rpb25fbGlnaHRfZGlyLCBuKSwgMCwgMSk7XHJcblxyXG4gICAgICAgIGxldCBzaGFkb3dfd2VpZ2h0ID0gZ2V0X3NoYWRvd193ZWlnaHQoaGl0X2luZm8sIGRpcmVjdGlvbl9saWdodF9kaXIsIG9ial9saXN0KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb2xvci5tdWx0aXBseShzdHJlbmd0aCkubXVsdGlwbHkoc2hhZG93X3dlaWdodCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgVmVjdG9yIGZyb20gXCIuL1ZlY3RvclwiO1xyXG5pbXBvcnQgUmF5IGZyb20gXCIuL1JheVwiO1xyXG5pbXBvcnQgeyBkZWdyZWVfdG9fUmFkLCBnZXRfaGl0X3NvcnRfbGlzdCB9IGZyb20gXCIuL1Rvb2xcIlxyXG5pbXBvcnQgUmVuZGVyVGFyZ2V0IGZyb20gXCIuL1JlbmRlclRhcmdldFwiO1xyXG5pbXBvcnQgSGl0SW5mbyBmcm9tIFwiLi9IaXRJbmZvXCI7XHJcbmltcG9ydCBTY2VuZU5vZGUgZnJvbSBcIi4uL09iamVjdC9TY2VuZU5vZGVcIjtcclxuaW1wb3J0IERpZmZ1c2UgZnJvbSBcIi4uL01hdGVyYWlscy9EaWZmdXNlXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYW1lcmEge1xyXG4gICAgZXllOiBWZWN0b3I7XHJcblxyXG4gICAgeF9heGlzOiBWZWN0b3I7XHJcbiAgICB5X2F4aXM6IFZlY3RvcjtcclxuICAgIHpfYXhpczogVmVjdG9yO1xyXG5cclxuICAgIGZvdl9kZWdyZWU6IG51bWJlcjtcclxuICAgIGNvbnN0cnVjdG9yKGV5ZTogVmVjdG9yLCBsb29rX2F0OiBWZWN0b3IsIGZvdl9kZWdyZWU6IG51bWJlcikge1xyXG5cclxuICAgICAgICAvLyBjYW1lcmEgM+i7uFxyXG4gICAgICAgIHRoaXMuel9heGlzID0gVmVjdG9yLm1pbnVzKGxvb2tfYXQsIGV5ZSkubm9ybWFsaXplKCk7XHJcblxyXG4gICAgICAgIGxldCBoZWxwX3YgPSBWZWN0b3IudXA7XHJcbiAgICAgICAgdGhpcy54X2F4aXMgPSBWZWN0b3IuY3Jvc3MoaGVscF92LCB0aGlzLnpfYXhpcykubm9ybWFsaXplKCk7XHJcbiAgICAgICAgdGhpcy55X2F4aXMgPSBWZWN0b3IuY3Jvc3ModGhpcy56X2F4aXMsIHRoaXMueF9heGlzKTtcclxuXHJcbiAgICAgICAgLy8gY2FtZXJhIOWOn+m7nlxyXG4gICAgICAgIHRoaXMuZXllID0gZXllO1xyXG5cclxuICAgICAgICAvLyBjYW1lcmEgZm92XHJcbiAgICAgICAgdGhpcy5mb3ZfZGVncmVlID0gZm92X2RlZ3JlZTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVfcmF5X2Rpcih4X3dlaWdodDogbnVtYmVyLCB5X3dlaWdodDogbnVtYmVyLCByYXRpbzogbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IGhhbGZfZm92X3JhZCA9IGRlZ3JlZV90b19SYWQoMC41ICogdGhpcy5mb3ZfZGVncmVlKTtcclxuICAgICAgICBsZXQgdGFuX2ggPSBNYXRoLnRhbihoYWxmX2Zvdl9yYWQpO1xyXG4gICAgICAgIGxldCB0YW5fdyA9IHRhbl9oICogcmF0aW87XHJcblxyXG4gICAgICAgIGxldCBkaXIgPSB0aGlzLnpfYXhpc1xyXG4gICAgICAgICAgICAuYWRkKHRoaXMueF9heGlzLm11bHRpcGx5KHhfd2VpZ2h0ICogdGFuX3cpKVxyXG4gICAgICAgICAgICAuYWRkKHRoaXMueV9heGlzLm11bHRpcGx5KHlfd2VpZ2h0ICogdGFuX2gpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRpcjtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIocmVuZGVyX3RhcmdldDogUmVuZGVyVGFyZ2V0LCBvYmpfbGlzdDogU2NlbmVOb2RlW10pIHtcclxuICAgICAgICBsZXQgZGlyZWN0aW9uX2xpZ2h0X2RpciA9IG5ldyBWZWN0b3IoMSwgLTEsIDApLm5vcm1hbGl6ZSgpO1xyXG5cclxuICAgICAgICBsZXQgaGFsZl9waXhlbF9vZmZzZXQgPSAwLjUgLyByZW5kZXJfdGFyZ2V0Lmg7XHJcbiAgICAgICAgbGV0IG11bHRpc2FtcGxlX2RpZmYgPSBbXHJcbiAgICAgICAgICAgIHsgeDogMCwgeTogMCB9LFxyXG4gICAgICAgICAgICB7IHg6IGhhbGZfcGl4ZWxfb2Zmc2V0LCB5OiBoYWxmX3BpeGVsX29mZnNldCB9LFxyXG4gICAgICAgICAgICB7IHg6IC1oYWxmX3BpeGVsX29mZnNldCwgeTogaGFsZl9waXhlbF9vZmZzZXQgfSxcclxuICAgICAgICAgICAgeyB4OiAtaGFsZl9waXhlbF9vZmZzZXQsIHk6IC1oYWxmX3BpeGVsX29mZnNldCB9LFxyXG4gICAgICAgICAgICB7IHg6IGhhbGZfcGl4ZWxfb2Zmc2V0LCB5OiAtaGFsZl9waXhlbF9vZmZzZXQgfSxcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICByZW5kZXJfdGFyZ2V0LnJlbmRlcl9waXhlbCgoeF93ZWlnaHQ6IG51bWJlciwgeV93ZWlnaHQ6IG51bWJlciwgcmF0aW86IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICBsZXQgcmF5X2RpciA9IHRoaXMuY3JlYXRlX3JheV9kaXIoeF93ZWlnaHQsIHlfd2VpZ2h0LCByYXRpbyk7XHJcblxyXG4gICAgICAgICAgICAvLyDnlKLnlJ/lpJrmop1yYXlcclxuICAgICAgICAgICAgbGV0IHJheXMgPSBtdWx0aXNhbXBsZV9kaWZmLm1hcChkaWZmID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIOWwjXJheV9kcmnkvZzlgY/np7tcclxuICAgICAgICAgICAgICAgIGxldCBkaXIgPSByYXlfZGlyLmFkZCh0aGlzLnhfYXhpcy5tdWx0aXBseShkaWZmLngpKS5hZGQodGhpcy55X2F4aXMubXVsdGlwbHkoZGlmZi55KSlcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDpm5bnhLblkoznkIPjgIHlubPpnaLnmoRoaXToqIjnrpfkuI3pnIDopoFkaXLkvZxub3JtYWxpemXvvIzkvYbngrrkuobmlrnkvr/lj43lsITnmoToqIjnrpfpgoTmmK/kvZxub3JtYWxpemVcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmF5KHRoaXMuZXllLCBkaXIubm9ybWFsaXplKCkpXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8g5q+P5YCLcmF56YO9566XY29sb3JcclxuICAgICAgICAgICAgbGV0IGNvbG9ycyA9IHJheXMubWFwKHJheSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaGl0X3NvcnRfbGlzdCA9IGdldF9oaXRfc29ydF9saXN0KG9ial9saXN0LCByYXkpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIOacieWwhOS4reWXjlxyXG4gICAgICAgICAgICAgICAgbGV0IGlzX2hpdCA9IGhpdF9zb3J0X2xpc3QubGVuZ3RoICE9IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNfaGl0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGhpdF9pbmZvID0gaGl0X3NvcnRfbGlzdFswXTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGl0X2luZm8ucy5zaGFkaW5nKGhpdF9pbmZvLCBkaXJlY3Rpb25fbGlnaHRfZGlyLCBvYmpfbGlzdCwgMSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEaWZmdXNlLmdyYXkuY29sb3I7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8g5Y+W5bmz5Z2H5bCx5pyJQW50aWFsaWFzaW5n5pWI5p6cXHJcbiAgICAgICAgICAgIGxldCBjb3VudCA9IG11bHRpc2FtcGxlX2RpZmYubGVuZ3RoO1xyXG4gICAgICAgICAgICBsZXQgZmluYWxfY29sb3IgPSBjb2xvcnMucmVkdWNlKChhY2N1bXVsYXRvcjogVmVjdG9yLCBjdXJyZW50OiBWZWN0b3IpID0+IGFjY3VtdWxhdG9yLmFkZChjdXJyZW50KSwgVmVjdG9yLnplcm8pLm11bHRpcGx5KDEgLyBjb3VudCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmaW5hbF9jb2xvcjtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBsYW5lIGZyb20gXCIuL1BsYW5lXCI7XHJcbmltcG9ydCBSYXkgZnJvbSBcIi4vUmF5XCI7XHJcbmltcG9ydCBWZWN0b3IgZnJvbSBcIi4vVmVjdG9yXCI7XHJcbmltcG9ydCBIaXRJbmZvIGZyb20gXCIuL0hpdEluZm9cIjtcclxuaW1wb3J0IEhpdGFibGUgZnJvbSBcIi4vSGl0YWJsZVwiO1xyXG5pbXBvcnQgU2hhZGVyIGZyb20gXCIuLi9NYXRlcmFpbHMvU2hhZGVyXCI7XHJcblxyXG4vLyDlsI/mlrnloYpcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVjdCBpbXBsZW1lbnRzIEhpdGFibGUge1xyXG4gICAgcGxhbmU6IFBsYW5lO1xyXG4gICAgdzogbnVtYmVyO1xyXG4gICAgaDogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHBsYW5lOiBQbGFuZSwgdzogbnVtYmVyLCBoOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnBsYW5lID0gcGxhbmU7XHJcbiAgICAgICAgdGhpcy53ID0gdztcclxuICAgICAgICB0aGlzLmggPSBoO1xyXG4gICAgfVxyXG5cclxuICAgIGhpdChyYXk6IFJheSwgczogU2hhZGVyKTogSGl0SW5mbyB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMucGxhbmUuaGl0KHJheSwgcyk7XHJcbiAgICAgICAgaWYgKHJlc3VsdC5pc19oaXQpIHtcclxuICAgICAgICAgICAgbGV0IGhpdF9wb3MgPSByZXN1bHQuaGl0X3BvcztcclxuICAgICAgICAgICAgbGV0IGRpZmYgPSBoaXRfcG9zLm1pbnVzKHRoaXMucGxhbmUuQyk7XHJcblxyXG4gICAgICAgICAgICAvLyDpgb/plovnm7jnrYnnmoTmg4Xms4FcclxuICAgICAgICAgICAgbGV0IGhlbHBfdiA9IFZlY3Rvci5lcXVhbCh0aGlzLnBsYW5lLk4sIFZlY3Rvci51cCkgPyBuZXcgVmVjdG9yKDEsIDAsIDApIDogVmVjdG9yLnVwO1xyXG5cclxuICAgICAgICAgICAgbGV0IHdfYXhpcyA9IFZlY3Rvci5jcm9zcyhoZWxwX3YsIHRoaXMucGxhbmUuTikubm9ybWFsaXplKCk7XHJcbiAgICAgICAgICAgIGxldCBoX2F4aXMgPSBWZWN0b3IuY3Jvc3Mod19heGlzLCB0aGlzLnBsYW5lLk4pO1xyXG4gICAgICAgICAgICBsZXQgd192YWx1ZSA9IFZlY3Rvci5kb3QoZGlmZiwgd19heGlzKTtcclxuICAgICAgICAgICAgbGV0IGhfdmFsdWUgPSBWZWN0b3IuZG90KGRpZmYsIGhfYXhpcyk7XHJcblxyXG4gICAgICAgICAgICBsZXQgaXNfaGl0ID0gTWF0aC5hYnMod192YWx1ZSkgPCB0aGlzLncgJiYgTWF0aC5hYnMoaF92YWx1ZSkgPCB0aGlzLmg7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBpc19oaXQsXHJcbiAgICAgICAgICAgICAgICBoaXRfcG9zLFxyXG4gICAgICAgICAgICAgICAgaTogcmF5LmRpcixcclxuICAgICAgICAgICAgICAgIHQ6IHJlc3VsdC50LFxyXG4gICAgICAgICAgICAgICAgbm9ybWFsOiB0aGlzLnBsYW5lLk4sXHJcbiAgICAgICAgICAgICAgICBzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgaXNfaGl0OiBmYWxzZSxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCBWZWN0b3IgZnJvbSAnLi9WZWN0b3InO1xyXG5pbXBvcnQgUmF5IGZyb20gJy4vUmF5JztcclxuaW1wb3J0IHsgbnVtYmVyX2VxdWFsIH0gZnJvbSAnLi9Ub29sJztcclxuaW1wb3J0IEhpdEluZm8gZnJvbSAnLi9IaXRJbmZvJztcclxuaW1wb3J0IEhpdGFibGUgZnJvbSAnLi9IaXRhYmxlJztcclxuaW1wb3J0IFNoYWRlciBmcm9tICcuLi9NYXRlcmFpbHMvU2hhZGVyJztcclxuXHJcbi8vIOW5s+mdolxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGFuZSBpbXBsZW1lbnRzIEhpdGFibGUge1xyXG5cclxuICAgIEM6IFZlY3RvcjtcclxuICAgIE46IFZlY3RvcjtcclxuICAgIGNvbnN0cnVjdG9yKHBvaW50OiBWZWN0b3IsIG5vcm1hbDogVmVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5DID0gcG9pbnQ7XHJcbiAgICAgICAgdGhpcy5OID0gbm9ybWFsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOa4rOippnRlc3BfcOWSjOaWueWQkemHj+aYr+S4jeaYr+WcqOWQjOS4gOmCilxyXG4gICAgaXNfcG9zaXRpdmUodGVzdF9wOiBWZWN0b3IpIHtcclxuICAgICAgICBsZXQgZGlmZiA9IFZlY3Rvci5taW51cyh0ZXN0X3AsIHRoaXMuQyk7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gVmVjdG9yLmRvdChkaWZmLCB0aGlzLk4pO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZSA+IDA7XHJcbiAgICB9XHJcblxyXG4gICAgaGl0KHJheTogUmF5LCBzOiBTaGFkZXIpOiBIaXRJbmZvIHtcclxuICAgICAgICAvLyByYXkgaGl0IHBsYW5lIFxyXG4gICAgICAgIGxldCBmcm9tID0gcmF5LmZyb207XHJcbiAgICAgICAgbGV0IGRpciA9IHJheS5kaXI7XHJcblxyXG4gICAgICAgIC8vIChGLUMp44CCTiArIHQgKETjgIJOKSA9IDBcclxuICAgICAgICAvLyB0ICA9IChDLUYp44CCTiAvIChE44CCTilcclxuICAgICAgICAvLyB0ICA9IChBIC8gKEIpXHJcbiAgICAgICAgbGV0IEIgPSBWZWN0b3IuZG90KGRpciwgdGhpcy5OKTtcclxuICAgICAgICBsZXQgQSA9IFZlY3Rvci5kb3QoVmVjdG9yLm1pbnVzKHRoaXMuQywgZnJvbSksIHRoaXMuTik7XHJcblxyXG4gICAgICAgIC8vIGF2b2lkIGRpdmlkZSBieSAwXHJcbiAgICAgICAgaWYgKG51bWJlcl9lcXVhbChCLCAwKSlcclxuICAgICAgICAgICAgcmV0dXJuIHsgaXNfaGl0OiBmYWxzZSwgaGl0X3BvczogbnVsbCwgdDogLTEgfTtcclxuXHJcbiAgICAgICAgbGV0IHQgPSBBIC8gQjtcclxuICAgICAgICBsZXQgaXNfaGl0ID0gdCA+IDAuMDtcclxuICAgICAgICBsZXQgaGl0X3BvcyA9IGZyb20uYWRkKGRpci5tdWx0aXBseSh0KSk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaXNfaGl0LFxyXG4gICAgICAgICAgICBoaXRfcG9zLFxyXG4gICAgICAgICAgICBpOiBkaXIsXHJcbiAgICAgICAgICAgIHQsXHJcbiAgICAgICAgICAgIG5vcm1hbDogdGhpcy5OLFxyXG4gICAgICAgICAgICBzXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IFZlY3RvciBmcm9tIFwiLi9WZWN0b3JcIjtcclxuaW1wb3J0IFJheSBmcm9tIFwiLi9SYXlcIjtcclxuaW1wb3J0IHsgbnVtYmVyX2VxdWFsIH0gZnJvbSAnLi9Ub29sJztcclxuaW1wb3J0IEhpdEluZm8gZnJvbSBcIi4vSGl0SW5mb1wiO1xyXG5pbXBvcnQgSGl0YWJsZSBmcm9tIFwiLi9IaXRhYmxlXCI7XHJcbmltcG9ydCBTaGFkZXIgZnJvbSBcIi4uL01hdGVyYWlscy9TaGFkZXJcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNwaGVyZSBpbXBsZW1lbnRzIEhpdGFibGUge1xyXG5cclxuICAgIEM6IFZlY3RvcjsgLy8g55CD5Lit5b+DXHJcbiAgICBSOiBudW1iZXI7IC8vIOeQg+WNiuW+kVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKEM6IFZlY3RvciwgUjogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5DID0gQztcclxuICAgICAgICB0aGlzLlIgPSBSO1xyXG4gICAgfVxyXG5cclxuICAgIGhpdChyYXk6IFJheSwgczogU2hhZGVyKTogSGl0SW5mbyB7XHJcbiAgICAgICAgLy8g6KejMuasoeaWueeoi+W8j1xyXG4gICAgICAgIC8vIChYLUMp44CCKFgtQykgPSBSKlJcclxuICAgICAgICAvLyBYPUYrdCpEXHJcbiAgICAgICAgLy8gdD1bKC1iLXNxcnRfaykvMmEsKC1iK3NxcnRfaykvMmFdXHJcbiAgICAgICAgbGV0IEQgPSByYXkuZGlyO1xyXG4gICAgICAgIGxldCBGID0gcmF5LmZyb207XHJcbiAgICAgICAgbGV0IGEgPSBWZWN0b3IuZG90KEQsIEQpO1xyXG4gICAgICAgIGxldCBiID0gMiAqIChWZWN0b3IuZG90KEQsIEYpIC0gVmVjdG9yLmRvdChELCB0aGlzLkMpKTtcclxuICAgICAgICBsZXQgYyA9IFZlY3Rvci5kb3QoRiwgRikgLSAyICogVmVjdG9yLmRvdChGLCB0aGlzLkMpICsgVmVjdG9yLmRvdCh0aGlzLkMsIHRoaXMuQykgLSB0aGlzLlIgKiB0aGlzLlI7XHJcblxyXG4gICAgICAgIGxldCBrID0gYiAqIGIgLSA0ICogYSAqIGM7XHJcbiAgICAgICAgaWYgKG51bWJlcl9lcXVhbChrLCAwKSkgeyAgLy8g5Lqk5pa8Mem7nlxyXG4gICAgICAgICAgICBsZXQgdCA9IC1iIC8gKDIgKiBhKTtcclxuXHJcbiAgICAgICAgICAgIC8v5pOL5o6JXHJcbiAgICAgICAgICAgIGlmICh0IDwgMCkgeyByZXR1cm4geyBpc19oaXQ6IGZhbHNlIH0gfVxyXG5cclxuICAgICAgICAgICAgbGV0IGhpdF9wb3MgPSBGLmFkZChELm11bHRpcGx5KHQpKTtcclxuICAgICAgICAgICAgbGV0IG5vcm1hbCA9IGhpdF9wb3MubWludXModGhpcy5DKS5ub3JtYWxpemUoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGlzX2hpdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGhpdF9wb3MsXHJcbiAgICAgICAgICAgICAgICBpOiBELFxyXG4gICAgICAgICAgICAgICAgdCxcclxuICAgICAgICAgICAgICAgIG5vcm1hbCxcclxuICAgICAgICAgICAgICAgIHNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChrID4gMCkgeyAvLyDkuqTmlrwy6bueXHJcblxyXG4gICAgICAgICAgICAvLyDpgY7mv77lh7p0PjBcclxuICAgICAgICAgICAgLy8gcmF5LmZyb23lnKjnkIPlhafmnInlj6/og73lh7rnj750PDBcclxuICAgICAgICAgICAgLy8g55CD5ZyocmF555qE5b6M6Z2i5Lmf5Y+v6IO95Ye654++dDwwXHJcbiAgICAgICAgICAgIGxldCBzcXJ0X2sgPSBNYXRoLnNxcnQoayk7XHJcbiAgICAgICAgICAgIGxldCB0X2xpc3QgPSBbKC1iIC0gc3FydF9rKSAvICgyICogYSksICgtYiArIHNxcnRfaykgLyAoMiAqIGEpXS5maWx0ZXIoeCA9PiB4ID4gMCk7XHJcblxyXG4gICAgICAgICAgICAvLyDpg73mmK/osqDlgLxcclxuICAgICAgICAgICAgaWYgKHRfbGlzdC5sZW5ndGggPT0gMCkgeyByZXR1cm4geyBpc19oaXQ6IGZhbHNlIH0gfVxyXG5cclxuICAgICAgICAgICAgbGV0IHQgPSB0X2xpc3RbMF07XHJcbiAgICAgICAgICAgIGxldCBoaXRfcG9zID0gRi5hZGQoRC5tdWx0aXBseSh0KSk7XHJcbiAgICAgICAgICAgIGxldCBub3JtYWwgPSBoaXRfcG9zLm1pbnVzKHRoaXMuQykubm9ybWFsaXplKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBpc19oaXQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBoaXRfcG9zLFxyXG4gICAgICAgICAgICAgICAgaTogRCxcclxuICAgICAgICAgICAgICAgIHQsXHJcbiAgICAgICAgICAgICAgICBub3JtYWwsXHJcbiAgICAgICAgICAgICAgICBzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgeyAvLyDmspLkuqTpu55cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGlzX2hpdDogZmFsc2UsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgVmVjdG9yIGZyb20gXCIuL1ZlY3RvclwiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZW5kZXJUYXJnZXQge1xyXG4gICAgdzogbnVtYmVyID0gMzIwO1xyXG4gICAgaDogbnVtYmVyID0gMjQwO1xyXG4gICAgYmFja2J1ZmZlcjogT2Zmc2NyZWVuQ2FudmFzID0gbnVsbDtcclxuICAgIGNvbnN0cnVjdG9yKHc6IG51bWJlciA9IDMyMCwgaDogbnVtYmVyID0gMjQwKSB7XHJcbiAgICAgICAgdGhpcy53ID0gdztcclxuICAgICAgICB0aGlzLmggPSBoO1xyXG4gICAgICAgIHRoaXMuYmFja2J1ZmZlciA9IG5ldyBPZmZzY3JlZW5DYW52YXModGhpcy53LCB0aGlzLmgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcl9waXhlbChmdW5jOiAoeF93ZWlnaHQ6IG51bWJlciwgeV93ZWlnaHQ6IG51bWJlciwgcmF0aW86IG51bWJlcikgPT4gVmVjdG9yKSB7XHJcblxyXG4gICAgICAgIGxldCBjb250ZXh0XzJkID0gdGhpcy5iYWNrYnVmZmVyLmdldENvbnRleHQoJzJkJyk7XHJcblxyXG4gICAgICAgIC8vIGdldCBzb3VyY2UgZGF0YSBhcnJheVxyXG4gICAgICAgIGxldCBiYWNrYnVmZmVyX2RhdGEgPSBjb250ZXh0XzJkLmdldEltYWdlRGF0YSgwLCAwLCB0aGlzLncsIHRoaXMuaCk7XHJcbiAgICAgICAgbGV0IGJhY2tidWZmZXJfZGF0YV9hcnJheSA9IGJhY2tidWZmZXJfZGF0YS5kYXRhO1xyXG5cclxuICAgICAgICBsZXQgcmF0aW8gPSB0aGlzLncgLyB0aGlzLmg7XHJcblxyXG4gICAgICAgIC8vIHNldCBhcnJheSB2YWx1ZVxyXG4gICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgdGhpcy5oOyArK3kpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLnc7ICsreCkge1xyXG4gICAgICAgICAgICAgICAgLy8gcmdiYSBlYWNoIGNvbG9yIGlzIDRieXRlXHJcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSA0ICogKHggKyB5ICogdGhpcy53KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBodHRwOi8vd3d3LmludHJvLXRvLWR4ci5jd3ltYW4ub3JnL3ByZXNlbnRhdGlvbnMvSW50cm9EWFJfUmF5dHJhY2luZ1NoYWRlcnMucGRmXHJcbiAgICAgICAgICAgICAgICAvLyBwYWdlIDc4XHJcbiAgICAgICAgICAgICAgICAvLyDpnIDopoHlgY/np7vljYrlgIvlg4/ntKDnmoTplbfluqbvvIzmiY3mnIPokL3lnKjlg4/ntKDnmoTkuK3plpMo5LiN6YGO6IKJ55y855yL5LiN5aSq5Ye65beu5Yil5bCx5piv5LqGKVxyXG4gICAgICAgICAgICAgICAgLy8gcmVtYXAgdG8gMH4xXHJcbiAgICAgICAgICAgICAgICBsZXQgWCA9ICgoeCArIDAuNSkgLyB0aGlzLncpO1xyXG4gICAgICAgICAgICAgICAgbGV0IFkgPSAoKHkgKyAwLjUpIC8gdGhpcy5oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBjaGFuZ2UgeSBkaXJlY3Rpb25cclxuICAgICAgICAgICAgICAgIFkgPSAxIC0gWTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyByZW1hcCB0byAtMX4xXHJcbiAgICAgICAgICAgICAgICBsZXQgeF93ZWlnaHQgPSBYICogMiAtIDE7XHJcbiAgICAgICAgICAgICAgICBsZXQgeV93ZWlnaHQgPSBZICogMiAtIDE7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGNvbG9yID0gZnVuYyh4X3dlaWdodCwgeV93ZWlnaHQsIHJhdGlvKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgciA9IGNvbG9yLng7XHJcbiAgICAgICAgICAgICAgICBsZXQgZyA9IGNvbG9yLnk7XHJcbiAgICAgICAgICAgICAgICBsZXQgYiA9IGNvbG9yLno7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZ2FtbWHmoKHmraNcclxuICAgICAgICAgICAgICAgIGxldCBnYW1tYSA9IDEgLyAyLjE7XHJcbiAgICAgICAgICAgICAgICByID0gTWF0aC5wb3cociwgZ2FtbWEpO1xyXG4gICAgICAgICAgICAgICAgZyA9IE1hdGgucG93KGcsIGdhbW1hKTtcclxuICAgICAgICAgICAgICAgIGIgPSBNYXRoLnBvdyhiLCBnYW1tYSk7XHJcblxyXG4gICAgICAgICAgICAgICAgYmFja2J1ZmZlcl9kYXRhX2FycmF5W2luZGV4KytdID0gTWF0aC5yb3VuZChyICogMjU1KTtcclxuICAgICAgICAgICAgICAgIGJhY2tidWZmZXJfZGF0YV9hcnJheVtpbmRleCsrXSA9IE1hdGgucm91bmQoZyAqIDI1NSk7XHJcbiAgICAgICAgICAgICAgICBiYWNrYnVmZmVyX2RhdGFfYXJyYXlbaW5kZXgrK10gPSBNYXRoLnJvdW5kKGIgKiAyNTUpO1xyXG4gICAgICAgICAgICAgICAgYmFja2J1ZmZlcl9kYXRhX2FycmF5W2luZGV4XSA9IDI1NTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb250ZXh0XzJkLnB1dEltYWdlRGF0YShiYWNrYnVmZmVyX2RhdGEsIDAsIDApO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dfYnVmZmVyKGNhbnZhc19pZDogc3RyaW5nKSB7XHJcbiAgICAgICAgLy8g6Kit5a6aYnVmZmVy55qE5aSn5bCP5ZKMY3NzIHN0eWxl55qE5aSn5bCP5LiA5qijXHJcbiAgICAgICAgLy8gaHR0cHM6Ly9vcGVuaG9tZS5jYy9Hb3NzaXAvV2ViR0wvQ2FudmFzLmh0bWxcclxuICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2FudmFzX2lkKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgICAgICBjYW52YXMuc3R5bGUud2lkdGggPSB0aGlzLncgKyAncHgnO1xyXG4gICAgICAgIGNhbnZhcy5zdHlsZS5oZWlnaHQgPSB0aGlzLmggKyAncHgnO1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IGNhbnZhcy5jbGllbnRXaWR0aDtcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gY2FudmFzLmNsaWVudEhlaWdodDtcclxuXHJcbiAgICAgICAgLy8gY29weSBiYWNrYnVmZmVyIHRvIGNhbnZhc1xyXG4gICAgICAgIGxldCBjb250ZXh0X2JpdG1hcF9yZW5kZXIgPSBjYW52YXMuZ2V0Q29udGV4dChcImJpdG1hcHJlbmRlcmVyXCIpO1xyXG4gICAgICAgIGNvbnRleHRfYml0bWFwX3JlbmRlci50cmFuc2ZlckZyb21JbWFnZUJpdG1hcCh0aGlzLmJhY2tidWZmZXIudHJhbnNmZXJUb0ltYWdlQml0bWFwKCkpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IERpZmZ1c2UgZnJvbSBcIi4uL01hdGVyYWlscy9EaWZmdXNlXCI7XHJcbmltcG9ydCBIaXRhYmxlIGZyb20gXCIuLi9NYXRoL0hpdGFibGVcIjtcclxuaW1wb3J0IFNoYWRlciBmcm9tIFwiLi4vTWF0ZXJhaWxzL1NoYWRlclwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2NlbmVOb2RlIHtcclxuXHJcbiAgICBzOiBTaGFkZXI7XHJcbiAgICBoOiBIaXRhYmxlO1xyXG4gICAgY29uc3RydWN0b3IoczogU2hhZGVyLCBoOiBIaXRhYmxlKSB7XHJcbiAgICAgICAgdGhpcy5zID0gcztcclxuICAgICAgICB0aGlzLmggPSBoO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFNoYWRlciBmcm9tIFwiLi9TaGFkZXJcIjtcclxuaW1wb3J0IFZlY3RvciBmcm9tIFwiLi4vTWF0aC9WZWN0b3JcIjtcclxuaW1wb3J0IEhpdEluZm8gZnJvbSBcIi4uL01hdGgvSGl0SW5mb1wiO1xyXG5pbXBvcnQgeyBlcHNpbG9uLCBnZXRfaGl0X3NvcnRfbGlzdCB9IGZyb20gXCIuLi9NYXRoL1Rvb2xcIlxyXG5pbXBvcnQgUmF5IGZyb20gXCIuLi9NYXRoL1JheVwiO1xyXG5pbXBvcnQgU2NlbmVOb2RlIGZyb20gXCIuLi9PYmplY3QvU2NlbmVOb2RlXCI7XHJcbmltcG9ydCBEaWZmdXNlIGZyb20gXCIuL0RpZmZ1c2VcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1pcnJvciBpbXBsZW1lbnRzIFNoYWRlciB7XHJcbiAgICBzaGFkaW5nKGhpdF9pbmZvOiBIaXRJbmZvLCBkaXJlY3Rpb25fbGlnaHRfZGlyOiBWZWN0b3IsIG9ial9saXN0OiBTY2VuZU5vZGVbXSwgZGVwdGg6IG51bWJlcikge1xyXG5cclxuICAgICAgICBpZiAoZGVwdGggPiAyMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn6LaF6YGO5LiK6ZmQJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBEaWZmdXNlLmdyZWVuLmNvbG9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG4gPSBoaXRfaW5mby5ub3JtYWw7XHJcbiAgICAgICAgbGV0IGkgPSBoaXRfaW5mby5pO1xyXG4gICAgICAgIGxldCByID0gVmVjdG9yLnJlZmxlY3QoaSwgbik7XHJcblxyXG4gICAgICAgIC8vIOeUoueUn+WPjeWwhHJheVxyXG4gICAgICAgIGxldCBmcm9tID0gaGl0X2luZm8uaGl0X3Bvcy5hZGQoci5tdWx0aXBseShlcHNpbG9uKSk7IC8vIOWBj+enu+S4gOWwj+autei3nembou+8jOmBv+WFjeWwhOS4reiHquW3sVxyXG4gICAgICAgIGxldCByYXkgPSBuZXcgUmF5KGZyb20sIHIpO1xyXG4gICAgICAgIGxldCBoaXRfc29ydF9saXN0ID0gZ2V0X2hpdF9zb3J0X2xpc3Qob2JqX2xpc3QsIHJheSk7XHJcblxyXG4gICAgICAgIGxldCBjb2xvciA9IG5ldyBWZWN0b3IoMSwgMSwgMSk7XHJcbiAgICAgICAgLy8g5pyJ5bCE5Lit5ZeOXHJcbiAgICAgICAgbGV0IGlzX2hpdCA9IGhpdF9zb3J0X2xpc3QubGVuZ3RoICE9IDA7XHJcbiAgICAgICAgaWYgKGlzX2hpdCkge1xyXG4gICAgICAgICAgICBsZXQgaGl0X2luZm9fbmV4dCA9IGhpdF9zb3J0X2xpc3RbMF07XHJcbiAgICAgICAgICAgIGxldCBoaXRfY29sb3IgPSBoaXRfaW5mb19uZXh0LnMuc2hhZGluZyhoaXRfaW5mb19uZXh0LCBkaXJlY3Rpb25fbGlnaHRfZGlyLCBvYmpfbGlzdCwgKytkZXB0aCk7XHJcbiAgICAgICAgICAgIHJldHVybiBWZWN0b3IubXVsdGlwbHkzKGNvbG9yLCBoaXRfY29sb3IubXVsdGlwbHkoMC45KSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFZlY3Rvci5tdWx0aXBseTMoY29sb3IsIERpZmZ1c2UuZ3JheS5jb2xvci5tdWx0aXBseSgwLjkpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgQXBwIGZyb20gJy4vQXBwJztcclxuXHJcbm5ldyBBcHAoKTsiLCJpbXBvcnQgVmVjdG9yIGZyb20gJy4vTWF0aC9WZWN0b3InXHJcbmltcG9ydCBDYW1lcmEgZnJvbSAnLi9NYXRoL0NhbWVyYSdcclxuaW1wb3J0IFJlY3QgZnJvbSAnLi9NYXRoL1JlY3QnO1xyXG5pbXBvcnQgUGxhbmUgZnJvbSAnLi9NYXRoL1BsYW5lJztcclxuaW1wb3J0IFNwaGVyZSBmcm9tICcuL01hdGgvU3BoZXJlJztcclxuaW1wb3J0IFJlbmRlclRhcmdldCBmcm9tICcuL01hdGgvUmVuZGVyVGFyZ2V0JztcclxuaW1wb3J0IFNjZW5lTm9kZSBmcm9tICcuL09iamVjdC9TY2VuZU5vZGUnO1xyXG5pbXBvcnQgRGlmZnVzZSBmcm9tICcuL01hdGVyYWlscy9EaWZmdXNlJztcclxuaW1wb3J0IE1pcnJvciBmcm9tICcuL01hdGVyYWlscy9NaXJyb3InO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBwIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG5cclxuICAgICAgICBsZXQgZmxvb3IgPSBuZXcgU2NlbmVOb2RlKERpZmZ1c2Uud2hpdGUsIG5ldyBSZWN0KG5ldyBQbGFuZShWZWN0b3IuemVybywgVmVjdG9yLnVwKSwgMTYsIDE2KSlcclxuICAgICAgICBsZXQgb2JqX2xpc3Q6IFNjZW5lTm9kZVtdID0gW2Zsb29yXTtcclxuICAgICAgICBvYmpfbGlzdC5wdXNoKG5ldyBTY2VuZU5vZGUoRGlmZnVzZS55ZWxsb3csIG5ldyBTcGhlcmUobmV3IFZlY3Rvcig2LCAyLCAtOCksIDIpKSk7XHJcbiAgICAgICAgb2JqX2xpc3QucHVzaChuZXcgU2NlbmVOb2RlKERpZmZ1c2UuZ3JlZW4sIG5ldyBTcGhlcmUobmV3IFZlY3RvcigtNiwgMiwgLTgpLCAyKSkpO1xyXG4gICAgICAgIG9ial9saXN0LnB1c2gobmV3IFNjZW5lTm9kZShEaWZmdXNlLmJsdWUsIG5ldyBTcGhlcmUobmV3IFZlY3RvcigwLCAyLCAtMTIpLCAyKSkpO1xyXG4gICAgICAgIG9ial9saXN0LnB1c2gobmV3IFNjZW5lTm9kZShEaWZmdXNlLnllbGxvdywgbmV3IFNwaGVyZShuZXcgVmVjdG9yKC0xMCwgNiwgMCksIDYpKSk7XHJcblxyXG4gICAgICAgIG9ial9saXN0LnB1c2gobmV3IFNjZW5lTm9kZShuZXcgTWlycm9yKCksIG5ldyBTcGhlcmUobmV3IFZlY3RvcigwLCAyLCAtMiksIDIpKSk7XHJcbiAgICAgICAgb2JqX2xpc3QucHVzaChuZXcgU2NlbmVOb2RlKG5ldyBNaXJyb3IoKSwgbmV3IFNwaGVyZShuZXcgVmVjdG9yKDEyLCA0LCAtNiksIDQpKSk7XHJcbiAgICAgICAgb2JqX2xpc3QucHVzaChuZXcgU2NlbmVOb2RlKG5ldyBNaXJyb3IoKSwgbmV3IFNwaGVyZShuZXcgVmVjdG9yKDgsIDQsIDIpLCA0KSkpO1xyXG5cclxuICAgICAgICBsZXQgY2FtZXJhID0gbmV3IENhbWVyYShuZXcgVmVjdG9yKDAsIDIwLCAtMjApLCBWZWN0b3IuemVybywgNjApO1xyXG4gICAgICAgIC8vIGxldCByZW5kZXJfdGFyZ2V0ID0gbmV3IFJlbmRlclRhcmdldCg0MDk2LCAyMTYwKTtcclxuICAgICAgICAvLyBsZXQgcmVuZGVyX3RhcmdldCA9IG5ldyBSZW5kZXJUYXJnZXQoMTkyMCwgMTA4MCk7XHJcbiAgICAgICAgbGV0IHJlbmRlcl90YXJnZXQgPSBuZXcgUmVuZGVyVGFyZ2V0KDgwMCwgNjAwKTtcclxuICAgICAgICBjYW1lcmEucmVuZGVyKHJlbmRlcl90YXJnZXQsIG9ial9saXN0KTtcclxuICAgICAgICByZW5kZXJfdGFyZ2V0LnNob3dfYnVmZmVyKCdjYW52YXMnKTtcclxuICAgIH1cclxufVxyXG5cclxuIl0sIm5hbWVzIjpbImZyb20iLCJkaXIiLCJ0aGlzIiwiZXBzaWxvbiIsIm51bWJlcl9lcXVhbCIsImEiLCJiIiwiTWF0aCIsImFicyIsImdldF9oaXRfc29ydF9saXN0Iiwib2JqX2xpc3QiLCJyYXkiLCJtYXAiLCJvYmoiLCJoIiwiaGl0IiwicyIsImZpbHRlciIsImluZm8iLCJpc19oaXQiLCJzb3J0IiwidCIsInB4IiwicHkiLCJweiIsIngiLCJ5IiwieiIsInJlZmxlY3QiLCJJIiwiTiIsIkwiLCJWZWN0b3IiLCJkb3QiLCJtdWx0aXBseSIsImFkZCIsIkEiLCJCIiwibWludXMiLCJtdWx0aXBseTMiLCJjcm9zcyIsImVxdWFsIiwibGVuZ3RoIiwic3FydCIsIm5vcm1hbGl6ZSIsInRlbXAiLCJuZWdhdGl2ZSIsImNsb25lIiwidXAiLCJ6ZXJvIiwiY29sb3IiLCJzaGFkaW5nIiwiaGl0X2luZm8iLCJkaXJlY3Rpb25fbGlnaHRfZGlyIiwiZGVwdGgiLCJuIiwibm9ybWFsIiwic3RyZW5ndGgiLCJzaGFkb3dfd2VpZ2h0IiwiaGl0X3BvcyIsImdldF9zaGFkb3dfd2VpZ2h0IiwieWVsbG93IiwiRGlmZnVzZSIsInJlZCIsImdyZWVuIiwiYmx1ZSIsImdyYXkiLCJ3aGl0ZSIsImV5ZSIsImxvb2tfYXQiLCJmb3ZfZGVncmVlIiwiel9heGlzIiwiaGVscF92IiwieF9heGlzIiwieV9heGlzIiwiY3JlYXRlX3JheV9kaXIiLCJ4X3dlaWdodCIsInlfd2VpZ2h0IiwicmF0aW8iLCJkIiwiaGFsZl9mb3ZfcmFkIiwiUEkiLCJ0YW5faCIsInRhbiIsInRhbl93IiwicmVuZGVyIiwicmVuZGVyX3RhcmdldCIsImhhbGZfcGl4ZWxfb2Zmc2V0IiwibXVsdGlzYW1wbGVfZGlmZiIsInJlbmRlcl9waXhlbCIsInJheV9kaXIiLCJjb2xvcnMiLCJkaWZmIiwiaGl0X3NvcnRfbGlzdCIsImNvdW50IiwicmVkdWNlIiwiYWNjdW11bGF0b3IiLCJjdXJyZW50IiwicGxhbmUiLCJ3IiwicmVzdWx0IiwiQyIsIndfYXhpcyIsImhfYXhpcyIsIndfdmFsdWUiLCJoX3ZhbHVlIiwiaSIsInBvaW50IiwiaXNfcG9zaXRpdmUiLCJ0ZXN0X3AiLCJSIiwiRCIsIkYiLCJrIiwic3FydF9rIiwidF9saXN0IiwiYmFja2J1ZmZlciIsIk9mZnNjcmVlbkNhbnZhcyIsImZ1bmMiLCJjb250ZXh0XzJkIiwiZ2V0Q29udGV4dCIsImJhY2tidWZmZXJfZGF0YSIsImdldEltYWdlRGF0YSIsImJhY2tidWZmZXJfZGF0YV9hcnJheSIsImRhdGEiLCJpbmRleCIsIlgiLCJZIiwiciIsImciLCJnYW1tYSIsInBvdyIsInJvdW5kIiwicHV0SW1hZ2VEYXRhIiwic2hvd19idWZmZXIiLCJjYW52YXNfaWQiLCJjYW52YXMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGUiLCJ3aWR0aCIsImhlaWdodCIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwidHJhbnNmZXJGcm9tSW1hZ2VCaXRtYXAiLCJ0cmFuc2ZlclRvSW1hZ2VCaXRtYXAiLCJjb25zb2xlIiwibG9nIiwiaGl0X2luZm9fbmV4dCIsImhpdF9jb2xvciIsInB1c2giLCJjYW1lcmEiXSwic291cmNlUm9vdCI6IiJ9