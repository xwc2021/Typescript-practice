(()=>{"use strict";const t=function(t,e){this.from=t,this.dir=e};function e(t){return Math.PI*t/180}function n(t,e){return Math.abs(t-e)<.001}function i(t,e){return t.map((function(t){return t.h.hit(e,t.s)})).filter((function(t){return t.is_hit})).sort((function(t,e){return t.t-e.t}))}function r(t,e,n){return t+n*(e-t)}const s=function(){function t(t,e,n){this.x=0,this.y=0,this.z=0,this.x=t,this.y=e,this.z=n}return t.uv=function(e,n){return new t(e,n,0)},t.reflect=function(e,n){var i=-2*t.dot(e,n);return n.multiply(i).add(e)},t.add=function(e,n){return new t(n.x+e.x,n.y+e.y,n.z+e.z)},t.minus=function(e,n){return new t(e.x-n.x,e.y-n.y,e.z-n.z)},t.multiply=function(e,n){return new t(e.x*n,e.y*n,e.z*n)},t.multiply3=function(e,n){return new t(e.x*n.x,e.y*n.y,e.z*n.z)},t.cross=function(e,n){return new t(e.y*n.z-e.z*n.y,-e.x*n.z+e.z*n.x,e.x*n.y-e.y*n.x)},t.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},t.equal=function(t,e){return n(t.x,e.x)&&n(t.y,e.y)&&n(t.z,e.z)},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.prototype.normalize=function(){var t=this.length();return this.x=this.x/t,this.y=this.y/t,this.z=this.z/t,this},t.prototype.add=function(e){return t.add(this,e)},t.prototype.minus=function(e){return t.minus(this,e)},t.prototype.multiply=function(e){return t.multiply(this,e)},t.prototype.negative=function(){return t.multiply(this,-1)},t.prototype.clone=function(){return new t(this.x,this.y,this.z)},t.up=new t(0,1,0),t.zero=new t(0,0,0),t}(),a=function(){function t(t,e,n,i,r){this.p=new s(t,e,n),this.uv=new s(i,r,0)}return t.build_vertex=function(e,n){return new t(e.x,e.y,e.z,n.x,n.y)},t.prototype.copy=function(){return t.build_vertex(this.p,this.uv)},t}(),o=function(){function t(t,e,n,i){this.xAxis=t,this.yAxis=e,this.zAxis=n,this.position=i}return t.transformPoint=function(t,e){var n=t.xAxis.multiply(e.x),i=t.yAxis.multiply(e.y),r=t.zAxis.multiply(e.z);return t.position.add(n).add(i).add(r)},t.transformVector=function(t,e){var n=t.xAxis.multiply(e.x),i=t.yAxis.multiply(e.y),r=t.zAxis.multiply(e.z);return n.add(i).add(r)},t.transformTransform=function(e,n){return new t(t.transformVector(e,n.xAxis),t.transformVector(e,n.yAxis),t.transformVector(e,n.zAxis),t.transformPoint(e,n.position))},t.rotateByZ=function(n){var i=e(n),r=Math.cos(i),a=Math.sin(i);return new t(new s(r,a,0),new s(-a,r,0),new s(0,0,1),s.zero)},t.rotateByY=function(n){var i=e(n),r=Math.cos(i),a=Math.sin(i),o=new s(a,0,r);return new t(new s(r,0,-a),new s(0,1,0),o,s.zero)},t.rotateByX=function(n){var i=e(n),r=Math.cos(i),a=Math.sin(i);return new t(new s(1,0,0),new s(0,r,a),new s(0,-a,r),new s(0,0,0))},t.offset=function(e,n,i){return new t(new s(1,0,0),new s(0,1,0),new s(0,0,1),new s(e,n,i))},t}(),h=function(){function t(t,e,n){this.v0=t,this.v1=e,this.v2=n}return t.process=function(e,n,i){var h=o.transformPoint(i,e.v0.p),u=o.transformPoint(i,e.v1.p),c=o.transformPoint(i,e.v2.p),l=n.toCameraSpace(h),v=n.toCameraSpace(u),y=n.toCameraSpace(c),f=s.minus(v,l),p=s.minus(y,l),d=s.cross(f,p);d.normalize();var x=l.add(v).add(y).multiply(1/3),m=s.minus(s.zero,x);if(m.normalize(),s.dot(d,m)<=0)return null;for(var w=function(t,e){var n=[],i=function(t,e,n){var i=t.p,s=e.p,o=(n-i.z)/(s.z-i.z),h=r(i.x,s.x,o),u=r(i.y,s.y,o),c=t.uv,l=e.uv,v=r(c.x,l.x,o),y=r(c.y,l.y,o);return new a(h,u,n,v,y)},s=function(t,e,r){n[0]=t,n[1]=i(t,e,1),n[2]=i(t,r,1)},o=function(t,e,r){var s=i(r,t,1),a=i(t,e,1);n[0]=r,n[1]=s,n[2]=a,n[3]=r.copy(),n[4]=a,n[5]=e};return t.v0.p.z<1?t.v1.p.z<1?t.v2.p.z<1||s(t.v2,t.v0,t.v1):t.v2.p.z<1?s(t.v1,t.v2,t.v0):o(t.v0,t.v1,t.v2):t.v1.p.z<1?t.v2.p.z<1?s(t.v0,t.v1,t.v2):o(t.v1,t.v2,t.v0):t.v2.p.z<1?o(t.v2,t.v0,t.v1):(n[0]=t.v0,n[1]=t.v1,n[2]=t.v2),n}(new t(a.build_vertex(l,e.v0.uv),a.build_vertex(v,e.v1.uv),a.build_vertex(y,e.v2.uv))),_=[],z=0;z<w.length;++z)_[z]=n.toScreenSpace(w[z].p);return _},t.prototype.process=function(e,n){this.v_s=t.process(this,e,n)},t.prototype.draw=function(t){if(null!=this.v_s)for(var e=this.v_s.length/3,n=1;n<=e;++n){var i=3*n-1;t.moveTo(this.v_s[i].x,this.v_s[i].y),t.lineTo(this.v_s[i-2].x,this.v_s[i-2].y),t.lineTo(this.v_s[i-1].x,this.v_s[i-1].y),t.lineTo(this.v_s[i].x,this.v_s[i].y)}},t}(),u=function(){function t(){this.triangles=[],this.triangles.push(new h(a.build_vertex(new s(-10,-10,-10),s.uv(0,0)),a.build_vertex(new s(10,10,-10),s.uv(1,1)),a.build_vertex(new s(10,-10,-10),s.uv(1,0)))),this.triangles.push(new h(a.build_vertex(new s(-10,-10,-10),s.uv(0,0)),a.build_vertex(new s(-10,10,-10),s.uv(0,1)),a.build_vertex(new s(10,10,-10),s.uv(1,1))));for(var t=[o.rotateByY(90),o.rotateByY(180),o.rotateByY(270),o.rotateByX(90),o.rotateByX(-90)],e=0;e<t.length;++e){var n=t[e];this.triangles.push(new h(a.build_vertex(o.transformPoint(n,new s(-10,-10,-10)),s.uv(0,0)),a.build_vertex(o.transformPoint(n,new s(10,10,-10)),s.uv(1,1)),a.build_vertex(o.transformPoint(n,new s(10,-10,-10)),s.uv(1,0)))),this.triangles.push(new h(a.build_vertex(o.transformPoint(n,new s(-10,-10,-10)),s.uv(0,0)),a.build_vertex(o.transformPoint(n,new s(-10,10,-10)),s.uv(0,1)),a.build_vertex(o.transformPoint(n,new s(10,10,-10)),s.uv(1,1))))}}return t.prototype.update=function(t,e){this.triangles_after_clip=this.triangles;for(var n=0;n<this.triangles_after_clip.length;++n)this.triangles_after_clip[n].process(t,e)},t.prototype.draw=function(t){t.globalCompositeOperation="destination-over",t.strokeStyle="rgba(255,0,0,1)",t.beginPath();for(var e=0;e<this.triangles_after_clip.length;++e)this.triangles_after_clip[e].draw(t);t.stroke()},t}(),c=function(){function e(t){this.color=t}return e.prototype.shading=function(e,n,r,a){var o,h=e.normal,u=(0,(o=-s.dot(n,h))>1?1:o<0?0:o),c=function(e,n,r){var s=n.negative(),a=e.hit_pos.add(s.multiply(.001));return 0!=i(r,new t(a,s)).length?.45:1}(e,n,r);return this.color.multiply(u).multiply(c)},e.yellow=new e(new s(1,1,0)),e.red=new e(new s(1,0,0)),e.green=new e(new s(0,1,0)),e.blue=new e(new s(0,0,1)),e.gray=new e(new s(.5,.5,.5)),e.white=new e(new s(1,1,1)),e}(),l=function(){function n(t,n,i,r,a){this.moveEye=function(t,e){this.eye=s.add(this.eye,e.multiply(t))},this.toScreenSpace=function(t){var n=t.z,i=.5*e(this.fov_degree),r=1/Math.tan(i),a=1/(this.ratio*Math.tan(i)),o=t.x*a/n,h=t.y*r/n,u=this.halfW*o+this.screenCenterX,c=-this.halfH*h+this.screenCenterY;return new s(u,c,n)},this.ratio=r/a,this.screenW=r,this.screenH=a,this.screenCenterX=.5*this.screenW,this.screenCenterY=.5*this.screenH,this.halfW=.5*this.screenW,this.halfH=.5*this.screenH,this.z_axis=s.minus(n,t).normalize();var o=s.up;this.x_axis=s.cross(o,this.z_axis).normalize(),this.y_axis=s.cross(this.z_axis,this.x_axis),this.eye=t,this.fov_degree=i}return n.prototype.addPitch=function(t){},n.prototype.addYaw=function(t){},n.prototype.create_ray_dir=function(t,n,i){var r=e(.5*this.fov_degree),s=Math.tan(r),a=s*i;return this.z_axis.add(this.x_axis.multiply(t*a)).add(this.y_axis.multiply(n*s))},n.prototype.toCameraSpace=function(t){var e=t.minus(this.eye);return new s(s.dot(e,this.x_axis),s.dot(e,this.y_axis),s.dot(e,this.z_axis))},n.prototype.render=function(e,n){var r=this,a=new s(1,-1,0).normalize(),o=.5/e.h,h=[{x:0,y:0},{x:o,y:o},{x:-o,y:o},{x:-o,y:-o},{x:o,y:-o}];e.render_pixel((function(e,o,u){var l=r.create_ray_dir(e,o,u),v=h.map((function(e){var n=l.add(r.x_axis.multiply(e.x)).add(r.y_axis.multiply(e.y));return new t(r.eye,n.normalize())})).map((function(t){var e=i(n,t);if(0!=e.length){var r=e[0];return r.s.shading(r,a,n,1)}return c.gray.color})),y=h.length;return v.reduce((function(t,e){return t.add(e)}),s.zero).multiply(1/y)}))},n}();new(function(){function t(){var t=this;this.cameraIndex_view=1,this.cameraIndex_control=0,this.camera=null,this.screenWidth=800,this.screenHeight=600,this.box=null,window.onload=function(){t.init()},document.onkeydown=this.keyProc}return t.prototype.init=function(){var t=document.getElementById("canvas");t.style.width=this.screenWidth+"px",t.style.height=this.screenHeight+"px",t.width=t.clientWidth,t.height=t.clientHeight,this.ctx=t.getContext("2d"),this.box=new u,this.camera=new l(new s(0,250,-200),new s(0,0,0),60,this.screenWidth,this.screenHeight),this.start()},t.prototype.start=function(){var t=this;this.stop(),this.sum_t=0;var e=new Date;this.last_t=e.getTime(),this.thandle=window.setInterval((function(){t.drawScene()}),16)},t.prototype.resume=function(){var t=this,e=new Date;this.last_t=e.getTime(),this.thandle=window.setInterval((function(){t.drawScene()}),16)},t.prototype.stop=function(){window.clearInterval(this.thandle),this.thandle=null},t.prototype.drawScene=function(){var t=(new Date).getTime(),e=t-this.last_t;this.last_t=t,this.sum_t=this.sum_t+e,this.ctx.clearRect(0,0,this.screenWidth,this.screenHeight),this.ctx.beginPath(),this.ctx.fillStyle="rgba(180,30,15,0.1)",this.ctx.fillRect(0,0,this.screenWidth,this.screenHeight);var n=o.offset(0,0,0),i=this.sum_t/1e3*15%360,r=o.rotateByY(i),s=o.transformTransform(n,r);this.box.update(this.camera,s),this.box.draw(this.ctx),n=o.offset(150,0,0),r=o.rotateByY(i),s=o.transformTransform(r,n),this.box.update(this.camera,s),this.box.draw(this.ctx)},t.prototype.keyProc=function(t){switch(t.keyCode){case 87:this.camera.moveEye(1,this.camera.z_axis);break;case 82:this.camera.moveEye(-1,this.camera.z_axis);break;case 69:this.camera.moveEye(1,this.camera.y_axis);break;case 68:this.camera.moveEye(-1,this.camera.y_axis);break;case 83:this.camera.moveEye(-1,this.camera.x_axis);break;case 70:this.camera.moveEye(1,this.camera.x_axis);break;case 38:this.camera.addPitch(.1);break;case 40:this.camera.addPitch(-.1);break;case 37:this.camera.addYaw(-.1);break;case 39:this.camera.addYaw(.1)}},t}())})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLc00sSUFBSXRFLE9BQU9oSSxLQUFLaUksT0FBUW9HLEdBQzdCck8sS0FBS3NNLElBQUloRixLQUFLdEgsS0FBS3VILE1BR3ZCLFlBQUFxRixRQUFBLFNBQVEwQixHQW1CSixPQUFRQSxFQUFNQyxTQUNWLEtBakJHLEdBa0JDdk8sS0FBS2lJLE9BQU80QixRQUpSLEVBSXVCN0osS0FBS2lJLE9BQU93QyxRQUN2QyxNQUNKLEtBbkJHLEdBb0JDekssS0FBS2lJLE9BQU80QixTQVBSLEVBT3dCN0osS0FBS2lJLE9BQU93QyxRQUN4QyxNQUVKLEtBckJHLEdBc0JDekssS0FBS2lJLE9BQU80QixRQVhSLEVBV3VCN0osS0FBS2lJLE9BQU8yQyxRQUN2QyxNQUNKLEtBdkJHLEdBd0JDNUssS0FBS2lJLE9BQU80QixTQWRSLEVBY3dCN0osS0FBS2lJLE9BQU8yQyxRQUN4QyxNQUNKLEtBekJHLEdBMEJDNUssS0FBS2lJLE9BQU80QixTQWpCUixFQWlCd0I3SixLQUFLaUksT0FBTzBDLFFBQ3hDLE1BQ0osS0EzQkcsR0E0QkMzSyxLQUFLaUksT0FBTzRCLFFBcEJSLEVBb0J1QjdKLEtBQUtpSSxPQUFPMEMsUUFDdkMsTUFFSixLQTdCTSxHQThCRjNLLEtBQUtpSSxPQUFPNEMsU0F2Qk4sSUF3Qk4sTUFDSixLQS9CUSxHQWdDSjdLLEtBQUtpSSxPQUFPNEMsVUFBUyxJQUNyQixNQUVKLEtBbENRLEdBbUNKN0ssS0FBS2lJLE9BQU82QyxRQUFPLElBQ25CLE1BQ0osS0FwQ1MsR0FxQ0w5SyxLQUFLaUksT0FBTzZDLE9BakNOLE1BcUN0QixFQTVJQSxLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViZ2xfdGVzdC8uL3NyYy9NYXRoL1JheS50cyIsIndlYnBhY2s6Ly93ZWJnbF90ZXN0Ly4vc3JjL01hdGgvVG9vbC50cyIsIndlYnBhY2s6Ly93ZWJnbF90ZXN0Ly4vc3JjL01hdGgvVmVjdG9yLnRzIiwid2VicGFjazovL3dlYmdsX3Rlc3QvLi9zcmMvTWF0aC9WZXJ0ZXgudHMiLCJ3ZWJwYWNrOi8vd2ViZ2xfdGVzdC8uL3NyYy9NYXRoL1RyYW5zZm9ybS50cyIsIndlYnBhY2s6Ly93ZWJnbF90ZXN0Ly4vc3JjL01hdGgvVHJpYW5nbGUudHMiLCJ3ZWJwYWNrOi8vd2ViZ2xfdGVzdC8uL3NyYy9NYXRoL0JveDNELnRzIiwid2VicGFjazovL3dlYmdsX3Rlc3QvLi9zcmMvTWF0ZXJhaWxzL0RpZmZ1c2UudHMiLCJ3ZWJwYWNrOi8vd2ViZ2xfdGVzdC8uL3NyYy9NYXRoL0NhbWVyYS50cyIsIndlYnBhY2s6Ly93ZWJnbF90ZXN0Ly4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vd2ViZ2xfdGVzdC8uL3NyYy9SYXN0ZXJpemVyQXBwLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBWZWNvciBmcm9tIFwiLi9WZWN0b3JcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJheSB7XHJcbiAgICBmcm9tOiBWZWNvcjtcclxuICAgIGRpcjogVmVjb3I7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZnJvbTogVmVjb3IsIGRpcjogVmVjb3IpIHtcclxuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xyXG4gICAgICAgIHRoaXMuZGlyID0gZGlyO1xyXG4gICAgfVxyXG59OyIsImltcG9ydCBTY2VuZU5vZGUgZnJvbSBcIi4uL09iamVjdC9TY2VuZU5vZGVcIjtcclxuaW1wb3J0IFJheSBmcm9tIFwiLi9SYXlcIjtcclxuaW1wb3J0IEhpdEluZm8gZnJvbSBcIi4vSGl0SW5mb1wiO1xyXG5pbXBvcnQgVmVjdG9yIGZyb20gXCIuL1ZlY3RvclwiO1xyXG5pbXBvcnQgVHJpYW5nbGUgZnJvbSBcIi4vVHJpYW5nbGVcIjtcclxuaW1wb3J0IFZlcnRleCBmcm9tIFwiLi9WZXJ0ZXhcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWdyZWVfdG9fUmFkKGQ6IG51bWJlcikge1xyXG4gICAgcmV0dXJuIE1hdGguUEkgKiBkIC8gMTgwO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGVwc2lsb246IG51bWJlciA9IDAuMDAxO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG51bWJlcl9lcXVhbChhOiBudW1iZXIsIGI6IG51bWJlcikge1xyXG4gICAgcmV0dXJuIE1hdGguYWJzKGEgLSBiKSA8IGVwc2lsb247XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBcclxuICogQHBhcmFtIHggaW5wdXRcclxuICogQHBhcmFtIGEgbWluIFxyXG4gKiBAcGFyYW0gYiBtYXhcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjbGFtcCh4OiBudW1iZXIsIGE6IG51bWJlciwgYjogbnVtYmVyKSB7XHJcbiAgICBpZiAoeCA+IGIpXHJcbiAgICAgICAgcmV0dXJuIGI7XHJcbiAgICBlbHNlIGlmICh4IDwgYSlcclxuICAgICAgICByZXR1cm4gYTtcclxuICAgIGVsc2VcclxuICAgICAgICByZXR1cm4geDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldF9oaXRfc29ydF9saXN0KG9ial9saXN0OiBTY2VuZU5vZGVbXSwgcmF5OiBSYXkpIHtcclxuICAgIGxldCBoaXRfc29ydF9saXN0ID0gb2JqX2xpc3QubWFwKG9iaiA9PiBvYmouaC5oaXQocmF5LCBvYmoucykpXHJcbiAgICAgICAgLmZpbHRlcihpbmZvID0+IGluZm8uaXNfaGl0KVxyXG4gICAgICAgIC5zb3J0KChhOiBIaXRJbmZvLCBiOiBIaXRJbmZvKSA9PiBhLnQgLSBiLnQpO1xyXG5cclxuICAgIHJldHVybiBoaXRfc29ydF9saXN0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0X3NoYWRvd193ZWlnaHQoaGl0X2luZm86IEhpdEluZm8sIGRpcmVjdGlvbl9saWdodF9kaXI6IFZlY3Rvciwgb2JqX2xpc3Q6IFNjZW5lTm9kZVtdKSB7XHJcblxyXG4gICAgLy8g5piv5ZCm5Zyo5b2x5a2Q5YWnXHJcbiAgICBsZXQgZGlyID0gZGlyZWN0aW9uX2xpZ2h0X2Rpci5uZWdhdGl2ZSgpO1xyXG4gICAgbGV0IGZyb20gPSBoaXRfaW5mby5oaXRfcG9zLmFkZChkaXIubXVsdGlwbHkoZXBzaWxvbikpOyAvLyDlgY/np7vkuIDlsI/mrrXot53pm6LvvIzpgb/lhY3lsITkuK3oh6rlt7FcclxuICAgIGxldCByYXkgPSBuZXcgUmF5KGZyb20sIGRpcik7XHJcbiAgICBsZXQgaGl0X3NvcnRfbGlzdCA9IGdldF9oaXRfc29ydF9saXN0KG9ial9saXN0LCByYXkpO1xyXG4gICAgaWYgKGhpdF9zb3J0X2xpc3QubGVuZ3RoICE9IDApIHsgLy8g5Zyo5b2x5a2Q5YWnXHJcbiAgICAgICAgcmV0dXJuIDAuNDU7IC8vIOS4jeimgeWkqum7kVxyXG4gICAgfSBlbHNlXHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBsZXJwKGE6IG51bWJlciwgYjogbnVtYmVyLCB0OiBudW1iZXIpIHtcclxuICAgIHJldHVybiBhICsgdCAqIChiIC0gYSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjbGlwKHRyaWFuZ2xlOiBUcmlhbmdsZSwgbmVhclBsYW5lWjogbnVtYmVyKSB7XHJcblxyXG4gICAgbGV0IHZfY2xpcDogVmVydGV4W10gPSBbXTtcclxuXHJcbiAgICBsZXQgZ2V0Q3Jvc3NQb2ludCA9IGZ1bmN0aW9uICh2MDogVmVydGV4LCB2MTogVmVydGV4LCBwejogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgIGxldCBwdjAgPSB2MC5wO1xyXG4gICAgICAgIGxldCBwdjEgPSB2MS5wO1xyXG4gICAgICAgIGxldCB0ID0gKHB6IC0gcHYwLnopIC8gKHB2MS56IC0gcHYwLnopO1xyXG4gICAgICAgIGxldCB4ID0gbGVycChwdjAueCwgcHYxLngsIHQpO1xyXG4gICAgICAgIGxldCB5ID0gbGVycChwdjAueSwgcHYxLnksIHQpO1xyXG5cclxuICAgICAgICAvLyB1duS5n+imgeaPkuWAvFxyXG4gICAgICAgIGxldCB1djAgPSB2MC51djtcclxuICAgICAgICBsZXQgdXYxID0gdjEudXY7XHJcbiAgICAgICAgbGV0IHUgPSBsZXJwKHV2MC54LCB1djEueCwgdCk7XHJcbiAgICAgICAgbGV0IHYgPSBsZXJwKHV2MC55LCB1djEueSwgdCk7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgVmVydGV4KHgsIHksIHB6LCB1LCB2KTtcclxuICAgIH1cclxuXHJcbiAgICAvL3B2byBpbiBcclxuICAgIGxldCBjbGlwX2ZpcnN0X2luID0gZnVuY3Rpb24gKHB2MDogVmVydGV4LCBwdjE6IFZlcnRleCwgcHYyOiBWZXJ0ZXgpIHtcclxuICAgICAgICAvLyAxIHRyaWFuZ2xlIDEgb25lIHRyaWFuZ2xlXHJcbiAgICAgICAgdl9jbGlwWzBdID0gcHYwO1xyXG4gICAgICAgIHZfY2xpcFsxXSA9IGdldENyb3NzUG9pbnQocHYwLCBwdjEsIG5lYXJQbGFuZVopO1xyXG4gICAgICAgIHZfY2xpcFsyXSA9IGdldENyb3NzUG9pbnQocHYwLCBwdjIsIG5lYXJQbGFuZVopO1xyXG4gICAgfVxyXG5cclxuICAgIC8vcHZvIG91dFxyXG4gICAgbGV0IGNsaXBfZmlyc3Rfb3V0ID0gZnVuY3Rpb24gKHB2MDogVmVydGV4LCBwdjE6IFZlcnRleCwgcHYyOiBWZXJ0ZXgpIHtcclxuXHJcbiAgICAgICAgLy8gMSB0cmlhbmdsZSB0byAyIHRyaWFuZ2xlXHJcbiAgICAgICAgbGV0IGNyb3NzMSA9IGdldENyb3NzUG9pbnQocHYyLCBwdjAsIG5lYXJQbGFuZVopO1xyXG4gICAgICAgIGxldCBjcm9zczIgPSBnZXRDcm9zc1BvaW50KHB2MCwgcHYxLCBuZWFyUGxhbmVaKTtcclxuXHJcbiAgICAgICAgdl9jbGlwWzBdID0gcHYyO1xyXG4gICAgICAgIHZfY2xpcFsxXSA9IGNyb3NzMTtcclxuICAgICAgICB2X2NsaXBbMl0gPSBjcm9zczI7XHJcblxyXG4gICAgICAgIHZfY2xpcFszXSA9IHB2Mi5jb3B5KCk7XHJcbiAgICAgICAgdl9jbGlwWzRdID0gY3Jvc3MyO1xyXG4gICAgICAgIHZfY2xpcFs1XSA9IHB2MTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8g5pyJOOeoruaDheazgVxyXG4gICAgaWYgKHRyaWFuZ2xlLnYwLnAueiA8IG5lYXJQbGFuZVopLy9vdXRcclxuICAgIHtcclxuICAgICAgICBpZiAodHJpYW5nbGUudjEucC56IDwgbmVhclBsYW5lWikgLy9vdXQgb3V0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodHJpYW5nbGUudjIucC56IDwgbmVhclBsYW5lWikvL2Z1bGwgb3V0IG9mIG5lYXJQbGFuZVogKG5vIGNsaXApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdmdWxsIG91dCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgLy9vdXQgb3V0IGluXHJcbiAgICAgICAgICAgICAgICBjbGlwX2ZpcnN0X2luKHRyaWFuZ2xlLnYyLCB0cmlhbmdsZS52MCwgdHJpYW5nbGUudjEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIC8vb3V0IGluIFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHRyaWFuZ2xlLnYyLnAueiA8IG5lYXJQbGFuZVopLy9vdXQgaW4gb3V0XHJcbiAgICAgICAgICAgICAgICBjbGlwX2ZpcnN0X2luKHRyaWFuZ2xlLnYxLCB0cmlhbmdsZS52MiwgdHJpYW5nbGUudjApO1xyXG4gICAgICAgICAgICBlbHNlIC8vIG91dCBpbiBpblxyXG4gICAgICAgICAgICAgICAgY2xpcF9maXJzdF9vdXQodHJpYW5nbGUudjAsIHRyaWFuZ2xlLnYxLCB0cmlhbmdsZS52Mik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSAvLyBpblxyXG4gICAge1xyXG4gICAgICAgIGlmICh0cmlhbmdsZS52MS5wLnogPCBuZWFyUGxhbmVaKS8vIGluIG91dCBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh0cmlhbmdsZS52Mi5wLnogPCBuZWFyUGxhbmVaKS8vIGluIG91dCBvdXRcclxuICAgICAgICAgICAgICAgIGNsaXBfZmlyc3RfaW4odHJpYW5nbGUudjAsIHRyaWFuZ2xlLnYxLCB0cmlhbmdsZS52Mik7XHJcbiAgICAgICAgICAgIGVsc2UgLy8gaW4gb3V0IGluXHJcbiAgICAgICAgICAgICAgICBjbGlwX2ZpcnN0X291dCh0cmlhbmdsZS52MSwgdHJpYW5nbGUudjIsIHRyaWFuZ2xlLnYwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSAvLyBpbiBpblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHRyaWFuZ2xlLnYyLnAueiA8IG5lYXJQbGFuZVopLy8gaW4gaW4gb3V0XHJcbiAgICAgICAgICAgICAgICBjbGlwX2ZpcnN0X291dCh0cmlhbmdsZS52MiwgdHJpYW5nbGUudjAsIHRyaWFuZ2xlLnYxKTtcclxuICAgICAgICAgICAgZWxzZSAvLyBpbiBpbiBpbiAobm8gY2xpcClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdl9jbGlwWzBdID0gdHJpYW5nbGUudjA7XHJcbiAgICAgICAgICAgICAgICB2X2NsaXBbMV0gPSB0cmlhbmdsZS52MTtcclxuICAgICAgICAgICAgICAgIHZfY2xpcFsyXSA9IHRyaWFuZ2xlLnYyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2X2NsaXA7XHJcbn0iLCJpbXBvcnQgeyBudW1iZXJfZXF1YWwgfSBmcm9tICcuL1Rvb2wnXHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmVjdG9yIHtcclxuXHJcbiAgICBzdGF0aWMgdXYodTogbnVtYmVyLCB2OiBudW1iZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlY3Rvcih1LCB2LCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgdXAgPSBuZXcgVmVjdG9yKDAsIDEsIDApO1xyXG4gICAgc3RhdGljIHplcm8gPSBuZXcgVmVjdG9yKDAsIDAsIDApO1xyXG5cclxuICAgIHN0YXRpYyByZWZsZWN0KEk6IFZlY3RvciwgTjogVmVjdG9yKSB7XHJcbiAgICAgICAgbGV0IEwgPSAtMiAqIFZlY3Rvci5kb3QoSSwgTilcclxuICAgICAgICByZXR1cm4gTi5tdWx0aXBseShMKS5hZGQoSSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFkZChBOiBWZWN0b3IsIEI6IFZlY3Rvcikge1xyXG4gICAgICAgIGxldCB0ZW1wID0gbmV3IFZlY3RvcihCLnggKyBBLngsIEIueSArIEEueSwgQi56ICsgQS56KTtcclxuICAgICAgICByZXR1cm4gdGVtcFxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBtaW51cyhBOiBWZWN0b3IsIEI6IFZlY3Rvcikge1xyXG4gICAgICAgIGxldCB0ZW1wID0gbmV3IFZlY3RvcihBLnggLSBCLngsIEEueSAtIEIueSwgQS56IC0gQi56KTtcclxuICAgICAgICByZXR1cm4gdGVtcFxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBtdWx0aXBseShBOiBWZWN0b3IsIHM6IG51bWJlcikge1xyXG4gICAgICAgIGxldCB0ZW1wID0gbmV3IFZlY3RvcihBLnggKiBzLCBBLnkgKiBzLCBBLnogKiBzKTtcclxuICAgICAgICByZXR1cm4gdGVtcFxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBtdWx0aXBseTMoQTogVmVjdG9yLCBCOiBWZWN0b3IpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcihBLnggKiBCLngsIEEueSAqIEIueSwgQS56ICogQi56KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY3Jvc3MoQTogVmVjdG9yLCBCOiBWZWN0b3IpIHtcclxuICAgICAgICBsZXQgdGVtcCA9IG5ldyBWZWN0b3IoQS55ICogQi56IC0gQS56ICogQi55LCAtQS54ICogQi56ICsgQS56ICogQi54LCBBLnggKiBCLnkgLSBBLnkgKiBCLngpO1xyXG4gICAgICAgIHJldHVybiB0ZW1wO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBkb3QoQTogVmVjdG9yLCBCOiBWZWN0b3IpIHtcclxuICAgICAgICByZXR1cm4gQS54ICogQi54ICsgQS55ICogQi55ICsgQS56ICogQi56O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBlcXVhbChBOiBWZWN0b3IsIEI6IFZlY3Rvcikge1xyXG4gICAgICAgIHJldHVybiBudW1iZXJfZXF1YWwoQS54LCBCLngpICYmIG51bWJlcl9lcXVhbChBLnksIEIueSkgJiYgbnVtYmVyX2VxdWFsKEEueiwgQi56KTtcclxuICAgIH1cclxuXHJcbiAgICB4OiBudW1iZXIgPSAwO1xyXG4gICAgeTogbnVtYmVyID0gMDtcclxuICAgIHo6IG51bWJlciA9IDA7XHJcbiAgICBjb25zdHJ1Y3RvcihweDogbnVtYmVyLCBweTogbnVtYmVyLCBwejogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy54ID0gcHg7XHJcbiAgICAgICAgdGhpcy55ID0gcHk7XHJcbiAgICAgICAgdGhpcy56ID0gcHo7XHJcbiAgICB9XHJcblxyXG4gICAgbGVuZ3RoKCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55ICsgdGhpcy56ICogdGhpcy56KTtcclxuICAgIH1cclxuXHJcbiAgICBub3JtYWxpemUoKSB7XHJcbiAgICAgICAgbGV0IHRlbXAgPSB0aGlzLmxlbmd0aCgpO1xyXG4gICAgICAgIHRoaXMueCA9IHRoaXMueCAvIHRlbXA7XHJcbiAgICAgICAgdGhpcy55ID0gdGhpcy55IC8gdGVtcDtcclxuICAgICAgICB0aGlzLnogPSB0aGlzLnogLyB0ZW1wO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZChBOiBWZWN0b3IpIHtcclxuICAgICAgICByZXR1cm4gVmVjdG9yLmFkZCh0aGlzLCBBKTtcclxuICAgIH1cclxuXHJcbiAgICBtaW51cyhBOiBWZWN0b3IpIHtcclxuICAgICAgICByZXR1cm4gVmVjdG9yLm1pbnVzKHRoaXMsIEEpO1xyXG4gICAgfVxyXG5cclxuICAgIG11bHRpcGx5KHM6IG51bWJlcikge1xyXG4gICAgICAgIHJldHVybiBWZWN0b3IubXVsdGlwbHkodGhpcywgcyk7XHJcbiAgICB9XHJcblxyXG4gICAgbmVnYXRpdmUoKSB7XHJcbiAgICAgICAgcmV0dXJuIFZlY3Rvci5tdWx0aXBseSh0aGlzLCAtMSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvbmUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IodGhpcy54LCB0aGlzLnksIHRoaXMueik7XHJcbiAgICB9XHJcbn0iLCJcclxuaW1wb3J0IFZlY3RvciBmcm9tICcuL1ZlY3RvcidcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZlcnRleCB7XHJcbiAgICBzdGF0aWMgYnVpbGRfdmVydGV4KHA6IFZlY3RvciwgdXY6IFZlY3Rvcikge1xyXG4gICAgICAgIGxldCB2ZXJ0ZXggPSBuZXcgVmVydGV4KHAueCwgcC55LCBwLnosIHV2LngsIHV2LnkpO1xyXG4gICAgICAgIHJldHVybiB2ZXJ0ZXg7XHJcbiAgICB9XHJcblxyXG4gICAgcDogVmVjdG9yO1xyXG4gICAgdXY6IFZlY3RvcjtcclxuICAgIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIsIHU6IG51bWJlciwgdjogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5wID0gbmV3IFZlY3Rvcih4LCB5LCB6KTtcclxuICAgICAgICB0aGlzLnV2ID0gbmV3IFZlY3Rvcih1LCB2LCAwKTtcclxuXHJcblxyXG4gICAgfVxyXG5cclxuICAgIGNvcHkoKSB7XHJcbiAgICAgICAgcmV0dXJuIFZlcnRleC5idWlsZF92ZXJ0ZXgodGhpcy5wLCB0aGlzLnV2KTtcclxuICAgIH1cclxufSIsImltcG9ydCBWZWN0b3IgZnJvbSBcIi4vVmVjdG9yXCI7XHJcbmltcG9ydCB7IGRlZ3JlZV90b19SYWQgfSBmcm9tICcuL1Rvb2wnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUcmFuc2Zvcm0ge1xyXG4gICAgeEF4aXM6IFZlY3RvcjtcclxuICAgIHlBeGlzOiBWZWN0b3I7XHJcbiAgICB6QXhpczogVmVjdG9yO1xyXG4gICAgcG9zaXRpb246IFZlY3RvcjtcclxuICAgIGNvbnN0cnVjdG9yKHhBeGlzOiBWZWN0b3IsIHlBeGlzOiBWZWN0b3IsIHpBeGlzOiBWZWN0b3IsIHBvc2l0aW9uOiBWZWN0b3IpIHtcclxuICAgICAgICB0aGlzLnhBeGlzID0geEF4aXM7XHJcbiAgICAgICAgdGhpcy55QXhpcyA9IHlBeGlzO1xyXG4gICAgICAgIHRoaXMuekF4aXMgPSB6QXhpcztcclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHRyYW5zZm9ybVBvaW50KHRyYW5zZm9ybTogVHJhbnNmb3JtLCBwb2ludDogVmVjdG9yKSB7XHJcbiAgICAgICAgbGV0IHZlY3RvclggPSB0cmFuc2Zvcm0ueEF4aXMubXVsdGlwbHkocG9pbnQueCk7XHJcbiAgICAgICAgbGV0IHZlY3RvclkgPSB0cmFuc2Zvcm0ueUF4aXMubXVsdGlwbHkocG9pbnQueSk7XHJcbiAgICAgICAgbGV0IHZlY3RvclogPSB0cmFuc2Zvcm0uekF4aXMubXVsdGlwbHkocG9pbnQueik7XHJcblxyXG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm0ucG9zaXRpb24uYWRkKHZlY3RvclgpLmFkZCh2ZWN0b3JZKS5hZGQodmVjdG9yWik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHRyYW5zZm9ybVZlY3Rvcih0cmFuc2Zvcm06IFRyYW5zZm9ybSwgdmVydGV4OiBWZWN0b3IpIHtcclxuICAgICAgICBsZXQgdmVjdG9yWCA9IHRyYW5zZm9ybS54QXhpcy5tdWx0aXBseSh2ZXJ0ZXgueCk7XHJcbiAgICAgICAgbGV0IHZlY3RvclkgPSB0cmFuc2Zvcm0ueUF4aXMubXVsdGlwbHkodmVydGV4LnkpO1xyXG4gICAgICAgIGxldCB2ZWN0b3JaID0gdHJhbnNmb3JtLnpBeGlzLm11bHRpcGx5KHZlcnRleC56KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHZlY3RvclguYWRkKHZlY3RvclkpLmFkZCh2ZWN0b3JaKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgdHJhbnNmb3JtVHJhbnNmb3JtKHRyYW5zZm9ybTogVHJhbnNmb3JtLCBpbnB1dFRyYW5zZm9ybTogVHJhbnNmb3JtKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFuc2Zvcm0oXHJcbiAgICAgICAgICAgIFRyYW5zZm9ybS50cmFuc2Zvcm1WZWN0b3IodHJhbnNmb3JtLCBpbnB1dFRyYW5zZm9ybS54QXhpcyksXHJcbiAgICAgICAgICAgIFRyYW5zZm9ybS50cmFuc2Zvcm1WZWN0b3IodHJhbnNmb3JtLCBpbnB1dFRyYW5zZm9ybS55QXhpcyksXHJcbiAgICAgICAgICAgIFRyYW5zZm9ybS50cmFuc2Zvcm1WZWN0b3IodHJhbnNmb3JtLCBpbnB1dFRyYW5zZm9ybS56QXhpcyksXHJcbiAgICAgICAgICAgIFRyYW5zZm9ybS50cmFuc2Zvcm1Qb2ludCh0cmFuc2Zvcm0sIGlucHV0VHJhbnNmb3JtLnBvc2l0aW9uKSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByb3RhdGVCeVooZGVncmVlOiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgcmFkaWFuID0gZGVncmVlX3RvX1JhZChkZWdyZWUpO1xyXG4gICAgICAgIGxldCBjID0gTWF0aC5jb3MocmFkaWFuKSwgcyA9IE1hdGguc2luKHJhZGlhbik7XHJcbiAgICAgICAgbGV0IHhBeGlzID0gbmV3IFZlY3RvcihjLCBzLCAwKTtcclxuICAgICAgICBsZXQgeUF4aXMgPSBuZXcgVmVjdG9yKC1zLCBjLCAwKTtcclxuICAgICAgICBsZXQgekF4aXMgPSBuZXcgVmVjdG9yKDAsIDAsIDEpO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFRyYW5zZm9ybShcclxuICAgICAgICAgICAgeEF4aXMsXHJcbiAgICAgICAgICAgIHlBeGlzLFxyXG4gICAgICAgICAgICB6QXhpcyxcclxuICAgICAgICAgICAgVmVjdG9yLnplcm8sXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcm90YXRlQnlZKGRlZ3JlZTogbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IHJhZGlhbiA9IGRlZ3JlZV90b19SYWQoZGVncmVlKTtcclxuICAgICAgICBsZXQgYyA9IE1hdGguY29zKHJhZGlhbiksIHMgPSBNYXRoLnNpbihyYWRpYW4pO1xyXG4gICAgICAgIGxldCB6QXhpcyA9IG5ldyBWZWN0b3IocywgMCwgYyk7XHJcbiAgICAgICAgbGV0IHhBeGlzID0gbmV3IFZlY3RvcihjLCAwLCAtcyk7XHJcbiAgICAgICAgbGV0IHlBeGlzID0gbmV3IFZlY3RvcigwLCAxLCAwKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFuc2Zvcm0oXHJcbiAgICAgICAgICAgIHhBeGlzLFxyXG4gICAgICAgICAgICB5QXhpcyxcclxuICAgICAgICAgICAgekF4aXMsXHJcbiAgICAgICAgICAgIFZlY3Rvci56ZXJvLFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHJvdGF0ZUJ5WChkZWdyZWU6IG51bWJlcikge1xyXG4gICAgICAgIGxldCByYWRpYW4gPSBkZWdyZWVfdG9fUmFkKGRlZ3JlZSk7XHJcbiAgICAgICAgbGV0IGMgPSBNYXRoLmNvcyhyYWRpYW4pLCBzID0gTWF0aC5zaW4ocmFkaWFuKTtcclxuICAgICAgICBsZXQgeEF4aXMgPSBuZXcgVmVjdG9yKDEsIDAsIDApO1xyXG4gICAgICAgIGxldCB5QXhpcyA9IG5ldyBWZWN0b3IoMCwgYywgcyk7XHJcbiAgICAgICAgbGV0IHpBeGlzID0gbmV3IFZlY3RvcigwLCAtcywgYyk7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgVHJhbnNmb3JtKFxyXG4gICAgICAgICAgICB4QXhpcyxcclxuICAgICAgICAgICAgeUF4aXMsXHJcbiAgICAgICAgICAgIHpBeGlzLFxyXG4gICAgICAgICAgICBuZXcgVmVjdG9yKDAsIDAsIDApLFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIG9mZnNldCh4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFuc2Zvcm0oXHJcbiAgICAgICAgICAgIG5ldyBWZWN0b3IoMSwgMCwgMCksXHJcbiAgICAgICAgICAgIG5ldyBWZWN0b3IoMCwgMSwgMCksXHJcbiAgICAgICAgICAgIG5ldyBWZWN0b3IoMCwgMCwgMSksXHJcbiAgICAgICAgICAgIG5ldyBWZWN0b3IoeCwgeSwgeiksXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5cclxuIiwiaW1wb3J0IFRyYW5zZm9ybSBmcm9tICcuL1RyYW5zZm9ybSc7XHJcbmltcG9ydCBWZWN0b3IgZnJvbSAnLi9WZWN0b3InXHJcbmltcG9ydCBWZXJ0ZXggZnJvbSAnLi9WZXJ0ZXgnXHJcbmltcG9ydCB7IGNsaXAgfSBmcm9tICcuL1Rvb2wnO1xyXG5pbXBvcnQgQ2FtZXJhIGZyb20gJy4vQ2FtZXJhJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRyaWFuZ2xlIHtcclxuXHJcbiAgICBzdGF0aWMgcHJvY2Vzcyh0cmlhbmdsZTogVHJpYW5nbGUsIHBjYW1lcmE6IENhbWVyYSwgd29ybGRUcmFuc2Zvcm06IFRyYW5zZm9ybSkge1xyXG5cclxuICAgICAgICAvLyB0byB3b3JsZCBzcGFjZVxyXG4gICAgICAgIGxldCB2MF93ID0gVHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50KHdvcmxkVHJhbnNmb3JtLCB0cmlhbmdsZS52MC5wKTtcclxuICAgICAgICBsZXQgdjFfdyA9IFRyYW5zZm9ybS50cmFuc2Zvcm1Qb2ludCh3b3JsZFRyYW5zZm9ybSwgdHJpYW5nbGUudjEucCk7XHJcbiAgICAgICAgbGV0IHYyX3cgPSBUcmFuc2Zvcm0udHJhbnNmb3JtUG9pbnQod29ybGRUcmFuc2Zvcm0sIHRyaWFuZ2xlLnYyLnApO1xyXG5cclxuICAgICAgICAvLyB0byBjYW1lcmEgc3BhY2VcclxuICAgICAgICBsZXQgdjBfYyA9IHBjYW1lcmEudG9DYW1lcmFTcGFjZSh2MF93KTtcclxuICAgICAgICBsZXQgdjFfYyA9IHBjYW1lcmEudG9DYW1lcmFTcGFjZSh2MV93KTtcclxuICAgICAgICBsZXQgdjJfYyA9IHBjYW1lcmEudG9DYW1lcmFTcGFjZSh2Ml93KTtcclxuXHJcbiAgICAgICAgLy9iYWNrIGZhY2UgY3VsbGluZ1xyXG4gICAgICAgIGxldCB2MDEgPSBWZWN0b3IubWludXModjFfYywgdjBfYyk7XHJcbiAgICAgICAgbGV0IHYwMiA9IFZlY3Rvci5taW51cyh2Ml9jLCB2MF9jKTtcclxuICAgICAgICBsZXQgbm9ybWFsID0gVmVjdG9yLmNyb3NzKHYwMSwgdjAyKTtcclxuICAgICAgICBub3JtYWwubm9ybWFsaXplKCk7XHJcblxyXG4gICAgICAgIGxldCBjZW50ZXIgPSB2MF9jLmFkZCh2MV9jKS5hZGQodjJfYykubXVsdGlwbHkoMSAvIDMpO1xyXG4gICAgICAgIGxldCBjZW50ZXJfdG9fZXllID0gVmVjdG9yLm1pbnVzKFZlY3Rvci56ZXJvLCBjZW50ZXIpO1xyXG4gICAgICAgIGNlbnRlcl90b19leWUubm9ybWFsaXplKCk7XHJcbiAgICAgICAgbGV0IGNvc192YWx1ZSA9IFZlY3Rvci5kb3Qobm9ybWFsLCBjZW50ZXJfdG9fZXllKTs7XHJcbiAgICAgICAgaWYgKGNvc192YWx1ZSA8PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g6YeN5paw57aB5a6adXZcclxuICAgICAgICBsZXQgdjBfY191diA9IFZlcnRleC5idWlsZF92ZXJ0ZXgodjBfYywgdHJpYW5nbGUudjAudXYpO1xyXG4gICAgICAgIGxldCB2MV9jX3V2ID0gVmVydGV4LmJ1aWxkX3ZlcnRleCh2MV9jLCB0cmlhbmdsZS52MS51dik7XHJcbiAgICAgICAgbGV0IHYyX2NfdXYgPSBWZXJ0ZXguYnVpbGRfdmVydGV4KHYyX2MsIHRyaWFuZ2xlLnYyLnV2KTtcclxuXHJcbiAgICAgICAgLy9kbyBvbmx5IG5lYXJQbGFuZSBjbGlwXHJcbiAgICAgICAgbGV0IG5lYXJQbGFuZVogPSAxO1xyXG4gICAgICAgIGxldCB2X2NsaXAgPSBjbGlwKG5ldyBUcmlhbmdsZSh2MF9jX3V2LCB2MV9jX3V2LCB2Ml9jX3V2KSwgbmVhclBsYW5lWik7XHJcblxyXG4gICAgICAgIC8vIHRvIHNjcmVlbiBzcGFjZVxyXG4gICAgICAgIGxldCB2X3M6IFZlY3RvcltdID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2X2NsaXAubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgdl9zW2ldID0gcGNhbWVyYS50b1NjcmVlblNwYWNlKHZfY2xpcFtpXS5wKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHZfcztcclxuICAgIH1cclxuXHJcbiAgICB2MDogVmVydGV4O1xyXG4gICAgdjE6IFZlcnRleDtcclxuICAgIHYyOiBWZXJ0ZXg7XHJcbiAgICBjb25zdHJ1Y3RvcihwdjA6IFZlcnRleCwgcHYxOiBWZXJ0ZXgsIHB2MjogVmVydGV4KSB7XHJcbiAgICAgICAgdGhpcy52MCA9IHB2MDtcclxuICAgICAgICB0aGlzLnYxID0gcHYxO1xyXG4gICAgICAgIHRoaXMudjIgPSBwdjI7XHJcbiAgICB9XHJcblxyXG4gICAgdl9zOiBWZWN0b3JbXTtcclxuICAgIHByb2Nlc3MocGNhbWVyYTogQ2FtZXJhLCB3b3JsZFRyYW5zZm9ybTogVHJhbnNmb3JtKSB7XHJcbiAgICAgICAgdGhpcy52X3MgPSBUcmlhbmdsZS5wcm9jZXNzKHRoaXMsIHBjYW1lcmEsIHdvcmxkVHJhbnNmb3JtKTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudl9zID09IG51bGwpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgbGV0IHRDb3VudCA9IHRoaXMudl9zLmxlbmd0aCAvIDM7XHJcbiAgICAgICAgZm9yIChsZXQgYyA9IDE7IGMgPD0gdENvdW50OyArK2MpIHtcclxuICAgICAgICAgICAgbGV0IGluZGV4ID0gMyAqIGMgLSAxO1xyXG4gICAgICAgICAgICBjdHgubW92ZVRvKHRoaXMudl9zW2luZGV4XS54LCB0aGlzLnZfc1tpbmRleF0ueSk7XHJcbiAgICAgICAgICAgIGN0eC5saW5lVG8odGhpcy52X3NbaW5kZXggLSAyXS54LCB0aGlzLnZfc1tpbmRleCAtIDJdLnkpO1xyXG4gICAgICAgICAgICBjdHgubGluZVRvKHRoaXMudl9zW2luZGV4IC0gMV0ueCwgdGhpcy52X3NbaW5kZXggLSAxXS55KTtcclxuICAgICAgICAgICAgY3R4LmxpbmVUbyh0aGlzLnZfc1tpbmRleF0ueCwgdGhpcy52X3NbaW5kZXhdLnkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IFZlcnRleCBmcm9tICcuL1ZlcnRleCdcclxuaW1wb3J0IFRyaWFuZ2xlIGZyb20gJy4vVHJpYW5nbGUnO1xyXG5pbXBvcnQgVmVjdG9yIGZyb20gJy4vVmVjdG9yJztcclxuaW1wb3J0IFRyYW5zZm9ybSBmcm9tICcuL1RyYW5zZm9ybSc7XHJcbmltcG9ydCB7IGNsaXAgfSBmcm9tICcuL1Rvb2wnO1xyXG5pbXBvcnQgQ2FtZXJhIGZyb20gJy4vQ2FtZXJhJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJveCB7XHJcbiAgICB0cmlhbmdsZXM6IFRyaWFuZ2xlW107XHJcbiAgICB0cmlhbmdsZXNfYWZ0ZXJfY2xpcDogVHJpYW5nbGVbXTtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8vIOW7uueri+ato+aWuemrlOmggum7nuizh+aWmVxyXG4gICAgICAgIHRoaXMudHJpYW5nbGVzID0gW107XHJcbiAgICAgICAgLy/poIbmmYLph51cclxuICAgICAgICB0aGlzLnRyaWFuZ2xlcy5wdXNoKFxyXG4gICAgICAgICAgICBuZXcgVHJpYW5nbGUoXHJcbiAgICAgICAgICAgICAgICBWZXJ0ZXguYnVpbGRfdmVydGV4KG5ldyBWZWN0b3IoLTEwLCAtMTAsIC0xMCksIFZlY3Rvci51digwLCAwKSksXHJcbiAgICAgICAgICAgICAgICBWZXJ0ZXguYnVpbGRfdmVydGV4KG5ldyBWZWN0b3IoMTAsIDEwLCAtMTApLCBWZWN0b3IudXYoMSwgMSkpLFxyXG4gICAgICAgICAgICAgICAgVmVydGV4LmJ1aWxkX3ZlcnRleChuZXcgVmVjdG9yKDEwLCAtMTAsIC0xMCksIFZlY3Rvci51digxLCAwKSlcclxuICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgdGhpcy50cmlhbmdsZXMucHVzaChcclxuICAgICAgICAgICAgbmV3IFRyaWFuZ2xlKFxyXG4gICAgICAgICAgICAgICAgVmVydGV4LmJ1aWxkX3ZlcnRleChuZXcgVmVjdG9yKC0xMCwgLTEwLCAtMTApLCBWZWN0b3IudXYoMCwgMCkpLFxyXG4gICAgICAgICAgICAgICAgVmVydGV4LmJ1aWxkX3ZlcnRleChuZXcgVmVjdG9yKC0xMCwgMTAsIC0xMCksIFZlY3Rvci51digwLCAxKSksXHJcbiAgICAgICAgICAgICAgICBWZXJ0ZXguYnVpbGRfdmVydGV4KG5ldyBWZWN0b3IoMTAsIDEwLCAtMTApLCBWZWN0b3IudXYoMSwgMSkpXHJcbiAgICAgICAgICAgICkpO1xyXG5cclxuICAgICAgICBsZXQgbSA9IFtUcmFuc2Zvcm0ucm90YXRlQnlZKDkwKSwgVHJhbnNmb3JtLnJvdGF0ZUJ5WSgxODApLCBUcmFuc2Zvcm0ucm90YXRlQnlZKDI3MCksIFRyYW5zZm9ybS5yb3RhdGVCeVgoOTApLCBUcmFuc2Zvcm0ucm90YXRlQnlYKC05MCldXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIGxldCByb3RhdGVNYXRyaXggPSBtW2ldXHJcbiAgICAgICAgICAgIHRoaXMudHJpYW5nbGVzLnB1c2goXHJcbiAgICAgICAgICAgICAgICBuZXcgVHJpYW5nbGUoXHJcbiAgICAgICAgICAgICAgICAgICAgVmVydGV4LmJ1aWxkX3ZlcnRleChUcmFuc2Zvcm0udHJhbnNmb3JtUG9pbnQocm90YXRlTWF0cml4LCBuZXcgVmVjdG9yKC0xMCwgLTEwLCAtMTApKSwgVmVjdG9yLnV2KDAsIDApKSxcclxuICAgICAgICAgICAgICAgICAgICBWZXJ0ZXguYnVpbGRfdmVydGV4KFRyYW5zZm9ybS50cmFuc2Zvcm1Qb2ludChyb3RhdGVNYXRyaXgsIG5ldyBWZWN0b3IoMTAsIDEwLCAtMTApKSwgVmVjdG9yLnV2KDEsIDEpKSxcclxuICAgICAgICAgICAgICAgICAgICBWZXJ0ZXguYnVpbGRfdmVydGV4KFRyYW5zZm9ybS50cmFuc2Zvcm1Qb2ludChyb3RhdGVNYXRyaXgsIG5ldyBWZWN0b3IoMTAsIC0xMCwgLTEwKSksIFZlY3Rvci51digxLCAwKSlcclxuICAgICAgICAgICAgICAgICkpO1xyXG4gICAgICAgICAgICB0aGlzLnRyaWFuZ2xlcy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgbmV3IFRyaWFuZ2xlKFxyXG4gICAgICAgICAgICAgICAgICAgIFZlcnRleC5idWlsZF92ZXJ0ZXgoVHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50KHJvdGF0ZU1hdHJpeCwgbmV3IFZlY3RvcigtMTAsIC0xMCwgLTEwKSksIFZlY3Rvci51digwLCAwKSksXHJcbiAgICAgICAgICAgICAgICAgICAgVmVydGV4LmJ1aWxkX3ZlcnRleChUcmFuc2Zvcm0udHJhbnNmb3JtUG9pbnQocm90YXRlTWF0cml4LCBuZXcgVmVjdG9yKC0xMCwgMTAsIC0xMCkpLCBWZWN0b3IudXYoMCwgMSkpLFxyXG4gICAgICAgICAgICAgICAgICAgIFZlcnRleC5idWlsZF92ZXJ0ZXgoVHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50KHJvdGF0ZU1hdHJpeCwgbmV3IFZlY3RvcigxMCwgMTAsIC0xMCkpLCBWZWN0b3IudXYoMSwgMSkpXHJcbiAgICAgICAgICAgICAgICApKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKGNhbWVyYTogQ2FtZXJhLCB3b3JsZFRyYW5zZm9ybTogVHJhbnNmb3JtKSB7XHJcblxyXG4gICAgICAgIC8vIHRoaXMudHJpYW5nbGVzX2FmdGVyX2NsaXAgPSBbXTtcclxuICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudHJpYW5nbGVzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgLy8gICAgIGxldCB0cmlhbmdsZSA9IHRoaXMudHJpYW5nbGVzW2ldO1xyXG4gICAgICAgIC8vICAgICBsZXQgbmVhclBsYW5lWiA9IDE7XHJcbiAgICAgICAgLy8gICAgIGxldCB2X2NsaXAgPSBjbGlwKHRyaWFuZ2xlLCBuZWFyUGxhbmVaKTtcclxuXHJcbiAgICAgICAgLy8gICAgIGxldCBjb3VudCA9IHZfY2xpcC5sZW5ndGggLyAzO1xyXG4gICAgICAgIC8vICAgICAvLyBjb25zb2xlLmxvZyhpLCBjb3VudCk7XHJcbiAgICAgICAgLy8gICAgIGZvciAobGV0IGsgPSAwOyBrIDwgY291bnQ7ICsraykge1xyXG4gICAgICAgIC8vICAgICAgICAgLy8g57WE5ZCI5LiJ6KeS5b2iXHJcbiAgICAgICAgLy8gICAgICAgICBsZXQgbmV3X3RyaWFuZ2xlID0gbmV3IFRyaWFuZ2xlKHZfY2xpcFtrICogM10sIHZfY2xpcFtrICogMyArIDFdLCB2X2NsaXBbayAqIDMgKyAyXSk7XHJcbiAgICAgICAgLy8gICAgICAgICB0aGlzLnRyaWFuZ2xlc19hZnRlcl9jbGlwLnB1c2gobmV3X3RyaWFuZ2xlKTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH1cclxuICAgICAgICB0aGlzLnRyaWFuZ2xlc19hZnRlcl9jbGlwID0gdGhpcy50cmlhbmdsZXM7XHJcblxyXG4gICAgICAgIC8vIOiZleeQhuato+aWuemrlOeahOiuiuaPm1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50cmlhbmdsZXNfYWZ0ZXJfY2xpcC5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICB0aGlzLnRyaWFuZ2xlc19hZnRlcl9jbGlwW2ldLnByb2Nlc3MoY2FtZXJhLCB3b3JsZFRyYW5zZm9ybSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRyYXcoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIHtcclxuICAgICAgICAvLyDnlavkuInop5LlvaJcclxuICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2Rlc3RpbmF0aW9uLW92ZXInO1xyXG5cclxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAncmdiYSgyNTUsMCwwLDEpJztcclxuXHJcblxyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRyaWFuZ2xlc19hZnRlcl9jbGlwLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJpYW5nbGVzX2FmdGVyX2NsaXBbaV0uZHJhdyhjdHgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjdHguc3Ryb2tlKCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgVmVjdG9yIGZyb20gXCIuLi9NYXRoL1ZlY3RvclwiO1xyXG5pbXBvcnQgSGl0SW5mbyBmcm9tIFwiLi4vTWF0aC9IaXRJbmZvXCI7XHJcbmltcG9ydCB7IGNsYW1wLCBnZXRfc2hhZG93X3dlaWdodCB9IGZyb20gXCIuLi9NYXRoL1Rvb2xcIjtcclxuaW1wb3J0IFNoYWRlciBmcm9tIFwiLi9TaGFkZXJcIjtcclxuaW1wb3J0IFNjZW5lTm9kZSBmcm9tIFwiLi4vT2JqZWN0L1NjZW5lTm9kZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGlmZnVzZSBpbXBsZW1lbnRzIFNoYWRlciB7XHJcbiAgICBzdGF0aWMgeWVsbG93ID0gbmV3IERpZmZ1c2UobmV3IFZlY3RvcigxLCAxLCAwKSk7XHJcbiAgICBzdGF0aWMgcmVkID0gbmV3IERpZmZ1c2UobmV3IFZlY3RvcigxLCAwLCAwKSk7XHJcbiAgICBzdGF0aWMgZ3JlZW4gPSBuZXcgRGlmZnVzZShuZXcgVmVjdG9yKDAsIDEsIDApKTtcclxuICAgIHN0YXRpYyBibHVlID0gbmV3IERpZmZ1c2UobmV3IFZlY3RvcigwLCAwLCAxKSk7XHJcbiAgICBzdGF0aWMgZ3JheSA9IG5ldyBEaWZmdXNlKG5ldyBWZWN0b3IoMC41LCAwLjUsIDAuNSkpO1xyXG4gICAgc3RhdGljIHdoaXRlID0gbmV3IERpZmZ1c2UobmV3IFZlY3RvcigxLCAxLCAxKSk7XHJcblxyXG4gICAgY29sb3I6IFZlY3RvcjtcclxuICAgIGNvbnN0cnVjdG9yKGNvbG9yOiBWZWN0b3IpIHtcclxuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3I7XHJcbiAgICB9XHJcblxyXG4gICAgc2hhZGluZyhoaXRfaW5mbzogSGl0SW5mbywgZGlyZWN0aW9uX2xpZ2h0X2RpcjogVmVjdG9yLCBvYmpfbGlzdDogU2NlbmVOb2RlW10sIGRlcHRoOiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgbiA9IGhpdF9pbmZvLm5vcm1hbDtcclxuICAgICAgICBsZXQgc3RyZW5ndGggPSBjbGFtcCgtVmVjdG9yLmRvdChkaXJlY3Rpb25fbGlnaHRfZGlyLCBuKSwgMCwgMSk7XHJcblxyXG4gICAgICAgIGxldCBzaGFkb3dfd2VpZ2h0ID0gZ2V0X3NoYWRvd193ZWlnaHQoaGl0X2luZm8sIGRpcmVjdGlvbl9saWdodF9kaXIsIG9ial9saXN0KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb2xvci5tdWx0aXBseShzdHJlbmd0aCkubXVsdGlwbHkoc2hhZG93X3dlaWdodCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgVmVjdG9yIGZyb20gXCIuL1ZlY3RvclwiO1xyXG5pbXBvcnQgUmF5IGZyb20gXCIuL1JheVwiO1xyXG5pbXBvcnQgeyBkZWdyZWVfdG9fUmFkLCBnZXRfaGl0X3NvcnRfbGlzdCB9IGZyb20gXCIuL1Rvb2xcIlxyXG5pbXBvcnQgUmVuZGVyVGFyZ2V0IGZyb20gXCIuL1JlbmRlclRhcmdldFwiO1xyXG5pbXBvcnQgSGl0SW5mbyBmcm9tIFwiLi9IaXRJbmZvXCI7XHJcbmltcG9ydCBTY2VuZU5vZGUgZnJvbSBcIi4uL09iamVjdC9TY2VuZU5vZGVcIjtcclxuaW1wb3J0IERpZmZ1c2UgZnJvbSBcIi4uL01hdGVyYWlscy9EaWZmdXNlXCI7XHJcbmltcG9ydCBWZXJ0ZXggZnJvbSBcIi4vVmVydGV4XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYW1lcmEge1xyXG4gICAgZXllOiBWZWN0b3I7XHJcblxyXG4gICAgeF9heGlzOiBWZWN0b3I7XHJcbiAgICB5X2F4aXM6IFZlY3RvcjtcclxuICAgIHpfYXhpczogVmVjdG9yO1xyXG5cclxuICAgIHJhdGlvOiBudW1iZXI7XHJcblxyXG4gICAgc2NyZWVuVzogbnVtYmVyO1xyXG4gICAgc2NyZWVuSDogbnVtYmVyO1xyXG5cclxuICAgIHNjcmVlbkNlbnRlclg6IG51bWJlcjtcclxuICAgIHNjcmVlbkNlbnRlclk6IG51bWJlcjtcclxuICAgIGhhbGZXOiBudW1iZXI7XHJcbiAgICBoYWxmSDogbnVtYmVyO1xyXG5cclxuICAgIGZvdl9kZWdyZWU6IG51bWJlcjtcclxuICAgIGNvbnN0cnVjdG9yKGV5ZTogVmVjdG9yLCBsb29rX2F0OiBWZWN0b3IsIGZvdl9kZWdyZWU6IG51bWJlciwgc2NyZWVuVzogbnVtYmVyLCBzY3JlZW5IOiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgdGhpcy5yYXRpbyA9IHNjcmVlblcgLyBzY3JlZW5IO1xyXG4gICAgICAgIHRoaXMuc2NyZWVuVyA9IHNjcmVlblc7XHJcbiAgICAgICAgdGhpcy5zY3JlZW5IID0gc2NyZWVuSDtcclxuICAgICAgICB0aGlzLnNjcmVlbkNlbnRlclggPSB0aGlzLnNjcmVlblcgKiAwLjU7XHJcbiAgICAgICAgdGhpcy5zY3JlZW5DZW50ZXJZID0gdGhpcy5zY3JlZW5IICogMC41O1xyXG4gICAgICAgIHRoaXMuaGFsZlcgPSB0aGlzLnNjcmVlblcgKiAwLjU7XHJcbiAgICAgICAgdGhpcy5oYWxmSCA9IHRoaXMuc2NyZWVuSCAqIDAuNTtcclxuXHJcbiAgICAgICAgLy8gY2FtZXJhIDPou7hcclxuICAgICAgICB0aGlzLnpfYXhpcyA9IFZlY3Rvci5taW51cyhsb29rX2F0LCBleWUpLm5vcm1hbGl6ZSgpO1xyXG5cclxuICAgICAgICAvLyDlt6bmiYtcclxuICAgICAgICBsZXQgaGVscF92ID0gVmVjdG9yLnVwO1xyXG4gICAgICAgIHRoaXMueF9heGlzID0gVmVjdG9yLmNyb3NzKGhlbHBfdiwgdGhpcy56X2F4aXMpLm5vcm1hbGl6ZSgpO1xyXG4gICAgICAgIHRoaXMueV9heGlzID0gVmVjdG9yLmNyb3NzKHRoaXMuel9heGlzLCB0aGlzLnhfYXhpcyk7XHJcblxyXG4gICAgICAgIC8vIGNhbWVyYSDljp/pu55cclxuICAgICAgICB0aGlzLmV5ZSA9IGV5ZTtcclxuXHJcbiAgICAgICAgLy8gY2FtZXJhIGZvdlxyXG4gICAgICAgIHRoaXMuZm92X2RlZ3JlZSA9IGZvdl9kZWdyZWU7XHJcbiAgICB9XHJcblxyXG4gICAgbW92ZUV5ZSA9IGZ1bmN0aW9uIChzOiBudW1iZXIsIEE6IFZlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuZXllID0gVmVjdG9yLmFkZCh0aGlzLmV5ZSwgQS5tdWx0aXBseShzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkUGl0Y2goZGVncmVlOiBudW1iZXIpIHtcclxuICAgICAgICAvLyB0b2RvOiDkuZjkuIpsb2NhbCBtYXRyaXhcclxuICAgIH1cclxuXHJcbiAgICBhZGRZYXcoZGVncmVlOiBudW1iZXIpIHtcclxuICAgICAgICAvLyB0b2RvOiDkuZjkuIpsb2NhbCBtYXRyaXhcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVfcmF5X2Rpcih4X3dlaWdodDogbnVtYmVyLCB5X3dlaWdodDogbnVtYmVyLCByYXRpbzogbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IGhhbGZfZm92X3JhZCA9IGRlZ3JlZV90b19SYWQoMC41ICogdGhpcy5mb3ZfZGVncmVlKTtcclxuICAgICAgICBsZXQgdGFuX2ggPSBNYXRoLnRhbihoYWxmX2Zvdl9yYWQpO1xyXG4gICAgICAgIGxldCB0YW5fdyA9IHRhbl9oICogcmF0aW87XHJcblxyXG4gICAgICAgIGxldCBkaXIgPSB0aGlzLnpfYXhpc1xyXG4gICAgICAgICAgICAuYWRkKHRoaXMueF9heGlzLm11bHRpcGx5KHhfd2VpZ2h0ICogdGFuX3cpKVxyXG4gICAgICAgICAgICAuYWRkKHRoaXMueV9heGlzLm11bHRpcGx5KHlfd2VpZ2h0ICogdGFuX2gpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRpcjtcclxuICAgIH1cclxuXHJcbiAgICB0b0NhbWVyYVNwYWNlKEE6IFZlY3Rvcikge1xyXG4gICAgICAgIGxldCBkaWZmID0gQS5taW51cyh0aGlzLmV5ZSk7XHJcbiAgICAgICAgbGV0IHBvaW50X2luX2NhbWVyYV9zcGFjZSA9IG5ldyBWZWN0b3IoVmVjdG9yLmRvdChkaWZmLCB0aGlzLnhfYXhpcyksIFZlY3Rvci5kb3QoZGlmZiwgdGhpcy55X2F4aXMpLCBWZWN0b3IuZG90KGRpZmYsIHRoaXMuel9heGlzKSk7XHJcbiAgICAgICAgcmV0dXJuIHBvaW50X2luX2NhbWVyYV9zcGFjZTtcclxuICAgIH1cclxuXHJcbiAgICB0b1NjcmVlblNwYWNlID0gZnVuY3Rpb24gKEE6IFZlY3Rvcikge1xyXG4gICAgICAgIGxldCB6ID0gQS56O1xyXG4gICAgICAgIGxldCBmb3ZfcmFkID0gZGVncmVlX3RvX1JhZCh0aGlzLmZvdl9kZWdyZWUpO1xyXG4gICAgICAgIGxldCBoYWxmX2ZvdiA9IDAuNSAqIGZvdl9yYWQ7XHJcbiAgICAgICAgbGV0IHlfc2NhbGUgPSAxIC8gTWF0aC50YW4oaGFsZl9mb3YpO1xyXG4gICAgICAgIGxldCB4X3NjYWxlID0gMSAvICh0aGlzLnJhdGlvICogTWF0aC50YW4oaGFsZl9mb3YpKTtcclxuXHJcbiAgICAgICAgbGV0IE5EQ3ggPSBBLnggKiB4X3NjYWxlIC8gejtcclxuICAgICAgICBsZXQgTkRDeSA9IEEueSAqIHlfc2NhbGUgLyB6O1xyXG5cclxuICAgICAgICAvLyDnlKjluqfmqJnorormj5vkvobnnIvlvoXlvp5OREPliLBTY3JlZW4gU3BhY2VcclxuICAgICAgICAvLyBOREMgeOi7uOWcqHNjcmVlbiBzcGFjZSDngroody8yLDApXHJcbiAgICAgICAgLy8gTkRDIHnou7jlnKhzY3JlZW4gc3BhY2Ug54K6KC1oLzIsMClcclxuICAgICAgICBsZXQgeCA9IHRoaXMuaGFsZlcgKiBOREN4ICsgdGhpcy5zY3JlZW5DZW50ZXJYO1xyXG4gICAgICAgIGxldCB5ID0gLXRoaXMuaGFsZkggKiBOREN5ICsgdGhpcy5zY3JlZW5DZW50ZXJZO1xyXG5cclxuICAgICAgICBsZXQgdGVtcCA9IG5ldyBWZWN0b3IoeCwgeSwgeik7XHJcbiAgICAgICAgLy9hbGVydCh0ZW1wLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIHJldHVybiB0ZW1wO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOeul+WcllxyXG4gICAgcmVuZGVyKHJlbmRlcl90YXJnZXQ6IFJlbmRlclRhcmdldCwgb2JqX2xpc3Q6IFNjZW5lTm9kZVtdKSB7XHJcbiAgICAgICAgbGV0IGRpcmVjdGlvbl9saWdodF9kaXIgPSBuZXcgVmVjdG9yKDEsIC0xLCAwKS5ub3JtYWxpemUoKTtcclxuXHJcbiAgICAgICAgbGV0IGhhbGZfcGl4ZWxfb2Zmc2V0ID0gMC41IC8gcmVuZGVyX3RhcmdldC5oO1xyXG4gICAgICAgIGxldCBtdWx0aXNhbXBsZV9kaWZmID0gW1xyXG4gICAgICAgICAgICB7IHg6IDAsIHk6IDAgfSxcclxuICAgICAgICAgICAgeyB4OiBoYWxmX3BpeGVsX29mZnNldCwgeTogaGFsZl9waXhlbF9vZmZzZXQgfSxcclxuICAgICAgICAgICAgeyB4OiAtaGFsZl9waXhlbF9vZmZzZXQsIHk6IGhhbGZfcGl4ZWxfb2Zmc2V0IH0sXHJcbiAgICAgICAgICAgIHsgeDogLWhhbGZfcGl4ZWxfb2Zmc2V0LCB5OiAtaGFsZl9waXhlbF9vZmZzZXQgfSxcclxuICAgICAgICAgICAgeyB4OiBoYWxmX3BpeGVsX29mZnNldCwgeTogLWhhbGZfcGl4ZWxfb2Zmc2V0IH0sXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmVuZGVyX3RhcmdldC5yZW5kZXJfcGl4ZWwoKHhfd2VpZ2h0OiBudW1iZXIsIHlfd2VpZ2h0OiBudW1iZXIsIHJhdGlvOiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgbGV0IHJheV9kaXIgPSB0aGlzLmNyZWF0ZV9yYXlfZGlyKHhfd2VpZ2h0LCB5X3dlaWdodCwgcmF0aW8pO1xyXG5cclxuICAgICAgICAgICAgLy8g55Si55Sf5aSa5qKdcmF5XHJcbiAgICAgICAgICAgIGxldCByYXlzID0gbXVsdGlzYW1wbGVfZGlmZi5tYXAoZGlmZiA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyDlsI1yYXlfZHJp5L2c5YGP56e7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGlyID0gcmF5X2Rpci5hZGQodGhpcy54X2F4aXMubXVsdGlwbHkoZGlmZi54KSkuYWRkKHRoaXMueV9heGlzLm11bHRpcGx5KGRpZmYueSkpXHJcblxyXG4gICAgICAgICAgICAgICAgLy8g6ZuW54S25ZKM55CD44CB5bmz6Z2i55qEaGl06KiI566X5LiN6ZyA6KaBZGly5L2cbm9ybWFsaXpl77yM5L2G54K65LqG5pa55L6/5Y+N5bCE55qE6KiI566X6YKE5piv5L2cbm9ybWFsaXplXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJheSh0aGlzLmV5ZSwgZGlyLm5vcm1hbGl6ZSgpKVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIOavj+WAi3JheemDveeul2NvbG9yXHJcbiAgICAgICAgICAgIGxldCBjb2xvcnMgPSByYXlzLm1hcChyYXkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGhpdF9zb3J0X2xpc3QgPSBnZXRfaGl0X3NvcnRfbGlzdChvYmpfbGlzdCwgcmF5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDmnInlsITkuK3ll45cclxuICAgICAgICAgICAgICAgIGxldCBpc19oaXQgPSBoaXRfc29ydF9saXN0Lmxlbmd0aCAhPSAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzX2hpdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBoaXRfaW5mbyA9IGhpdF9zb3J0X2xpc3RbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhpdF9pbmZvLnMuc2hhZGluZyhoaXRfaW5mbywgZGlyZWN0aW9uX2xpZ2h0X2Rpciwgb2JqX2xpc3QsIDEpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGlmZnVzZS5ncmF5LmNvbG9yO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIOWPluW5s+Wdh+WwseaciUFudGlhbGlhc2luZ+aViOaenFxyXG4gICAgICAgICAgICBsZXQgY291bnQgPSBtdWx0aXNhbXBsZV9kaWZmLmxlbmd0aDtcclxuICAgICAgICAgICAgbGV0IGZpbmFsX2NvbG9yID0gY29sb3JzLnJlZHVjZSgoYWNjdW11bGF0b3I6IFZlY3RvciwgY3VycmVudDogVmVjdG9yKSA9PiBhY2N1bXVsYXRvci5hZGQoY3VycmVudCksIFZlY3Rvci56ZXJvKS5tdWx0aXBseSgxIC8gY291bnQpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmluYWxfY29sb3I7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufSIsIi8vIGltcG9ydCBBcHAgZnJvbSAnLi9BcHAnO1xyXG4vLyBuZXcgQXBwKCk7XHJcblxyXG5pbXBvcnQgUmFzdGVyaXplckFwcCBmcm9tICcuL1Jhc3Rlcml6ZXJBcHAnO1xyXG5uZXcgUmFzdGVyaXplckFwcCgpOyIsImltcG9ydCBCb3ggZnJvbSBcIi4vTWF0aC9Cb3gzRFwiO1xyXG5pbXBvcnQgQ2FtZXJhIGZyb20gXCIuL01hdGgvQ2FtZXJhXCI7XHJcbmltcG9ydCBUcmFuc2Zvcm0gZnJvbSBcIi4vTWF0aC9UcmFuc2Zvcm1cIjtcclxuaW1wb3J0IFZlY3RvciBmcm9tIFwiLi9NYXRoL1ZlY3RvclwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmFzdGVyaXplckFwcCB7XHJcblxyXG4gICAgY2FtZXJhSW5kZXhfdmlldyA9IDE7XHJcbiAgICBjYW1lcmFJbmRleF9jb250cm9sID0gMDtcclxuICAgIGNhbWVyYTogQ2FtZXJhID0gbnVsbDtcclxuICAgIHRoYW5kbGU6IG51bWJlcjtcclxuXHJcbiAgICBzY3JlZW5XaWR0aCA9IDgwMDtcclxuICAgIHNjcmVlbkhlaWdodCA9IDYwMDtcclxuICAgIGJveDogQm94ID0gbnVsbDtcclxuXHJcbiAgICBsYXN0X3Q6IG51bWJlcjtcclxuICAgIHN1bV90OiBudW1iZXI7XHJcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgICAgICAgd2luZG93Lm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBkb2N1bWVudC5vbmtleWRvd24gPSB0aGlzLmtleVByb2M7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhcycpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgICAgIGNhbnZhcy5zdHlsZS53aWR0aCA9IHRoaXMuc2NyZWVuV2lkdGggKyAncHgnO1xyXG4gICAgICAgIGNhbnZhcy5zdHlsZS5oZWlnaHQgPSB0aGlzLnNjcmVlbkhlaWdodCArICdweCc7XHJcbiAgICAgICAgY2FudmFzLndpZHRoID0gY2FudmFzLmNsaWVudFdpZHRoO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBjYW52YXMuY2xpZW50SGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcblxyXG4gICAgICAgIHRoaXMuYm94ID0gbmV3IEJveCgpO1xyXG4gICAgICAgIHRoaXMuY2FtZXJhID0gbmV3IENhbWVyYShuZXcgVmVjdG9yKDAsIDI1MCwgLTIwMCksIG5ldyBWZWN0b3IoMCwgMCwgMCksIDYwLCB0aGlzLnNjcmVlbldpZHRoLCB0aGlzLnNjcmVlbkhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5zdGFydCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMuc3RvcCgpO1xyXG4gICAgICAgIHRoaXMuc3VtX3QgPSAwO1xyXG4gICAgICAgIGxldCBkID0gbmV3IERhdGUoKTtcclxuICAgICAgICB0aGlzLmxhc3RfdCA9IGQuZ2V0VGltZSgpO1xyXG4gICAgICAgIHRoaXMudGhhbmRsZSA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7IHRoaXMuZHJhd1NjZW5lKCk7IH0sIDE2KTtcclxuICAgIH1cclxuXHJcbiAgICByZXN1bWUoKSB7XHJcbiAgICAgICAgbGV0IGQgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIHRoaXMubGFzdF90ID0gZC5nZXRUaW1lKCk7XHJcbiAgICAgICAgdGhpcy50aGFuZGxlID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHsgdGhpcy5kcmF3U2NlbmUoKTsgfSwgMTYpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0b3AoKSB7XHJcbiAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy50aGFuZGxlKTtcclxuICAgICAgICB0aGlzLnRoYW5kbGUgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdTY2VuZSgpIHtcclxuICAgICAgICBsZXQgZCA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgbGV0IHQgPSBkLmdldFRpbWUoKTtcclxuICAgICAgICBsZXQgZGlmZiA9IHQgLSB0aGlzLmxhc3RfdDtcclxuICAgICAgICB0aGlzLmxhc3RfdCA9IHQ7XHJcbiAgICAgICAgdGhpcy5zdW1fdCA9IHRoaXMuc3VtX3QgKyBkaWZmO1xyXG5cclxuICAgICAgICAvLyDmuIXnqbpcclxuICAgICAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5zY3JlZW5XaWR0aCwgdGhpcy5zY3JlZW5IZWlnaHQpO1xyXG4gICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IFwicmdiYSgxODAsMzAsMTUsMC4xKVwiO1xyXG4gICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KDAsIDAsIHRoaXMuc2NyZWVuV2lkdGgsIHRoaXMuc2NyZWVuSGVpZ2h0KTtcclxuXHJcbiAgICAgICAgLy/nlavnq4vmlrnpq5RcclxuICAgICAgICB2YXIgb2Zmc2V0TWF0cml4ID0gVHJhbnNmb3JtLm9mZnNldCgwLCAwLCAwKTtcclxuICAgICAgICB2YXIgbm93RGVncmVlID0gdGhpcy5zdW1fdCAvIDEwMDAgKiAxNSAlIDM2MDtcclxuICAgICAgICAvLyB2YXIgbm93RGVncmVlID0gMDtcclxuXHJcbiAgICAgICAgdmFyIHJvdGF0ZU1hdHJpeCA9IFRyYW5zZm9ybS5yb3RhdGVCeVkobm93RGVncmVlKTtcclxuICAgICAgICB2YXIgY29tYmluZU1hdHJpeCA9IFRyYW5zZm9ybS50cmFuc2Zvcm1UcmFuc2Zvcm0ob2Zmc2V0TWF0cml4LCByb3RhdGVNYXRyaXgpO1xyXG4gICAgICAgIHRoaXMuYm94LnVwZGF0ZSh0aGlzLmNhbWVyYSwgY29tYmluZU1hdHJpeCk7XHJcbiAgICAgICAgdGhpcy5ib3guZHJhdyh0aGlzLmN0eCk7XHJcblxyXG4gICAgICAgIHZhciBvZmZzZXRNYXRyaXggPSBUcmFuc2Zvcm0ub2Zmc2V0KDE1MCwgMCwgMCk7XHJcbiAgICAgICAgdmFyIHJvdGF0ZU1hdHJpeCA9IFRyYW5zZm9ybS5yb3RhdGVCeVkobm93RGVncmVlKTtcclxuICAgICAgICBjb21iaW5lTWF0cml4ID0gVHJhbnNmb3JtLnRyYW5zZm9ybVRyYW5zZm9ybShyb3RhdGVNYXRyaXgsIG9mZnNldE1hdHJpeCk7XHJcbiAgICAgICAgdGhpcy5ib3gudXBkYXRlKHRoaXMuY2FtZXJhLCBjb21iaW5lTWF0cml4KTtcclxuICAgICAgICB0aGlzLmJveC5kcmF3KHRoaXMuY3R4KTtcclxuICAgIH1cclxuXHJcbiAgICBrZXlQcm9jKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XHJcbiAgICAgICAgbGV0IEtlcE1hcCA9XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3OiA4NyxcclxuICAgICAgICAgICAgcjogODIsXHJcblxyXG4gICAgICAgICAgICBlOiA2OSxcclxuICAgICAgICAgICAgZDogNjgsXHJcbiAgICAgICAgICAgIHM6IDgzLFxyXG4gICAgICAgICAgICBmOiA3MCxcclxuXHJcbiAgICAgICAgICAgIGFfdXA6IDM4LFxyXG4gICAgICAgICAgICBhX2Rvd246IDQwLFxyXG4gICAgICAgICAgICBhX2xlZnQ6IDM3LFxyXG4gICAgICAgICAgICBhX3JpZ2h0OiAzOVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBtb3ZlUyA9IDE7XHJcbiAgICAgICAgdmFyIHJvdGF0ZVMgPSAwLjE7XHJcbiAgICAgICAgc3dpdGNoIChldmVudC5rZXlDb2RlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgS2VwTWFwLnc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS5tb3ZlRXllKG1vdmVTLCB0aGlzLmNhbWVyYS56X2F4aXMpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgS2VwTWFwLnI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS5tb3ZlRXllKC1tb3ZlUywgdGhpcy5jYW1lcmEuel9heGlzKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBLZXBNYXAuZTpcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLm1vdmVFeWUobW92ZVMsIHRoaXMuY2FtZXJhLnlfYXhpcyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBLZXBNYXAuZDpcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLm1vdmVFeWUoLW1vdmVTLCB0aGlzLmNhbWVyYS55X2F4aXMpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgS2VwTWFwLnM6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS5tb3ZlRXllKC1tb3ZlUywgdGhpcy5jYW1lcmEueF9heGlzKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEtlcE1hcC5mOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEubW92ZUV5ZShtb3ZlUywgdGhpcy5jYW1lcmEueF9heGlzKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBLZXBNYXAuYV91cDpcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLmFkZFBpdGNoKHJvdGF0ZVMpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgS2VwTWFwLmFfZG93bjpcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLmFkZFBpdGNoKC1yb3RhdGVTKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBLZXBNYXAuYV9sZWZ0OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEuYWRkWWF3KC1yb3RhdGVTKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEtlcE1hcC5hX3JpZ2h0OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEuYWRkWWF3KHJvdGF0ZVMpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il0sIm5hbWVzIjpbImZyb20iLCJkaXIiLCJ0aGlzIiwiZGVncmVlX3RvX1JhZCIsImQiLCJNYXRoIiwiUEkiLCJudW1iZXJfZXF1YWwiLCJhIiwiYiIsImFicyIsImdldF9oaXRfc29ydF9saXN0Iiwib2JqX2xpc3QiLCJyYXkiLCJtYXAiLCJvYmoiLCJoIiwiaGl0IiwicyIsImZpbHRlciIsImluZm8iLCJpc19oaXQiLCJzb3J0IiwidCIsImxlcnAiLCJweCIsInB5IiwicHoiLCJ4IiwieSIsInoiLCJ1diIsInUiLCJ2IiwiVmVjdG9yIiwicmVmbGVjdCIsIkkiLCJOIiwiTCIsImRvdCIsIm11bHRpcGx5IiwiYWRkIiwiQSIsIkIiLCJtaW51cyIsIm11bHRpcGx5MyIsImNyb3NzIiwiZXF1YWwiLCJsZW5ndGgiLCJzcXJ0Iiwibm9ybWFsaXplIiwidGVtcCIsIm5lZ2F0aXZlIiwiY2xvbmUiLCJ1cCIsInplcm8iLCJwIiwiYnVpbGRfdmVydGV4IiwiVmVydGV4IiwiY29weSIsInhBeGlzIiwieUF4aXMiLCJ6QXhpcyIsInBvc2l0aW9uIiwidHJhbnNmb3JtUG9pbnQiLCJ0cmFuc2Zvcm0iLCJwb2ludCIsInZlY3RvclgiLCJ2ZWN0b3JZIiwidmVjdG9yWiIsInRyYW5zZm9ybVZlY3RvciIsInZlcnRleCIsInRyYW5zZm9ybVRyYW5zZm9ybSIsImlucHV0VHJhbnNmb3JtIiwiVHJhbnNmb3JtIiwicm90YXRlQnlaIiwiZGVncmVlIiwicmFkaWFuIiwiYyIsImNvcyIsInNpbiIsInJvdGF0ZUJ5WSIsInJvdGF0ZUJ5WCIsIm9mZnNldCIsInB2MCIsInB2MSIsInB2MiIsInYwIiwidjEiLCJ2MiIsInByb2Nlc3MiLCJ0cmlhbmdsZSIsInBjYW1lcmEiLCJ3b3JsZFRyYW5zZm9ybSIsInYwX3ciLCJ2MV93IiwidjJfdyIsInYwX2MiLCJ0b0NhbWVyYVNwYWNlIiwidjFfYyIsInYyX2MiLCJ2MDEiLCJ2MDIiLCJub3JtYWwiLCJjZW50ZXIiLCJjZW50ZXJfdG9fZXllIiwidl9jbGlwIiwibmVhclBsYW5lWiIsImdldENyb3NzUG9pbnQiLCJ1djAiLCJ1djEiLCJjbGlwX2ZpcnN0X2luIiwiY2xpcF9maXJzdF9vdXQiLCJjcm9zczEiLCJjcm9zczIiLCJjbGlwIiwiVHJpYW5nbGUiLCJ2X3MiLCJpIiwidG9TY3JlZW5TcGFjZSIsImRyYXciLCJjdHgiLCJ0Q291bnQiLCJpbmRleCIsIm1vdmVUbyIsImxpbmVUbyIsInRyaWFuZ2xlcyIsInB1c2giLCJtIiwicm90YXRlTWF0cml4IiwidXBkYXRlIiwiY2FtZXJhIiwidHJpYW5nbGVzX2FmdGVyX2NsaXAiLCJnbG9iYWxDb21wb3NpdGVPcGVyYXRpb24iLCJzdHJva2VTdHlsZSIsImJlZ2luUGF0aCIsInN0cm9rZSIsImNvbG9yIiwic2hhZGluZyIsImhpdF9pbmZvIiwiZGlyZWN0aW9uX2xpZ2h0X2RpciIsImRlcHRoIiwibiIsInN0cmVuZ3RoIiwic2hhZG93X3dlaWdodCIsImhpdF9wb3MiLCJnZXRfc2hhZG93X3dlaWdodCIsInllbGxvdyIsIkRpZmZ1c2UiLCJyZWQiLCJncmVlbiIsImJsdWUiLCJncmF5Iiwid2hpdGUiLCJleWUiLCJsb29rX2F0IiwiZm92X2RlZ3JlZSIsInNjcmVlblciLCJzY3JlZW5IIiwibW92ZUV5ZSIsImhhbGZfZm92IiwieV9zY2FsZSIsInRhbiIsInhfc2NhbGUiLCJyYXRpbyIsIk5EQ3giLCJOREN5IiwiaGFsZlciLCJzY3JlZW5DZW50ZXJYIiwiaGFsZkgiLCJzY3JlZW5DZW50ZXJZIiwiel9heGlzIiwiaGVscF92IiwieF9heGlzIiwieV9heGlzIiwiYWRkUGl0Y2giLCJhZGRZYXciLCJjcmVhdGVfcmF5X2RpciIsInhfd2VpZ2h0IiwieV93ZWlnaHQiLCJoYWxmX2Zvdl9yYWQiLCJ0YW5faCIsInRhbl93IiwiZGlmZiIsInJlbmRlciIsInJlbmRlcl90YXJnZXQiLCJoYWxmX3BpeGVsX29mZnNldCIsIm11bHRpc2FtcGxlX2RpZmYiLCJyZW5kZXJfcGl4ZWwiLCJyYXlfZGlyIiwiY29sb3JzIiwiaGl0X3NvcnRfbGlzdCIsImNvdW50IiwicmVkdWNlIiwiYWNjdW11bGF0b3IiLCJjdXJyZW50IiwiY2FtZXJhSW5kZXhfdmlldyIsImNhbWVyYUluZGV4X2NvbnRyb2wiLCJzY3JlZW5XaWR0aCIsInNjcmVlbkhlaWdodCIsImJveCIsIndpbmRvdyIsIm9ubG9hZCIsImluaXQiLCJkb2N1bWVudCIsIm9ua2V5ZG93biIsImtleVByb2MiLCJjYW52YXMiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwid2lkdGgiLCJoZWlnaHQiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsImdldENvbnRleHQiLCJzdGFydCIsInN0b3AiLCJzdW1fdCIsIkRhdGUiLCJsYXN0X3QiLCJnZXRUaW1lIiwidGhhbmRsZSIsInNldEludGVydmFsIiwiZHJhd1NjZW5lIiwicmVzdW1lIiwiY2xlYXJJbnRlcnZhbCIsImNsZWFyUmVjdCIsImZpbGxTdHlsZSIsImZpbGxSZWN0Iiwib2Zmc2V0TWF0cml4Iiwibm93RGVncmVlIiwiY29tYmluZU1hdHJpeCIsImV2ZW50Iiwia2V5Q29kZSJdLCJzb3VyY2VSb290IjoiIn0=